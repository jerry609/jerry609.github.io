---
import PageLayout from '@/layouts/CommonPage.astro'
import RoadmapDrawer from '@/components/roadmap/RoadmapDrawer.astro'
import ActivityGraph from '@/components/roadmap/ActivityGraph.astro'

type Topic = {
  title: string
  prerequisites: { name: string; course: string }[]
  problems?: { id: string; title: string; score?: string; url?: string; vip?: boolean }[]
  rootSection?: {
    title: string
    desc?: string
    children?: any[]
    problems?: any[]
  }
}

const topics: Record<string, Topic> = {
  'sliding-window-two-pointers': {
    title: '滑动窗口与双指针',
    prerequisites: [],
    rootSection: {
      title: '滑动窗口与双指针',
      children: [
        {
          title: '一、定长滑动窗口',
          children: [
            {
              title: '§1.1 基础',
              desc: '【套路】教你解决定长滑窗！适用于所有定长滑窗题目！',
              problems: [
                { id: '1456', title: '定长子串中元音的最大数目', score: '1263' },
                { id: '643', title: '子数组最大平均数 I' },
                { id: '1343', title: '大小为 K 且平均值大于等于阈值的子数组数目', score: '1317' },
                { id: '2090', title: '半径为 k 的子数组平均值', score: '1358' },
                { id: '2379', title: '得到 K 个黑块的最少涂色次数', score: '1360' },
                { id: '2841', title: '几乎唯一子数组的最大和', score: '1546' },
                { id: '2461', title: '长度为 K 子数组中的最大和', score: '1553' },
                { id: '1423', title: '可获得的最大点数', score: '1574' },
                { id: '1176', title: '健身计划评估', vip: true },
                { id: '1100', title: '长度为 K 的无重复字符子串', vip: true },
                { id: '1852', title: '每个子数组的数字种类数', vip: true },
                { id: '1151', title: '最少交换次数来组合所有的 1', vip: true },
                { id: '2107', title: '分享 K 个糖果后独特口味的数量', vip: true }
              ]
            },
            {
              title: '§1.2 进阶（选做）',
              problems: [
                { id: '3679', title: '使库存平衡的最少丢弃次数', score: '1639' },
                { id: '1052', title: '爱生气的书店老板' },
                { id: '3439', title: '重新安排会议得到最多空余时间 I', score: '1729' },
                { id: '3694', title: '删除子字符串后不同的终点', score: '1739' },
                { id: '3652', title: '按策略买卖股票的最佳时机' },
                { id: '2134', title: '最少交换次数来组合所有的 1 II', score: '1748' },
                { id: '1652', title: '拆炸弹', desc: '做到 O(n)' },
                { id: '1297', title: '子串的最大出现次数', score: '1748' },
                { id: '2653', title: '滑动子数组的美丽值', score: '1786' },
                { id: '1888', title: '使二进制字符串字符交替的最少反转次数', score: '2006' },
                { id: '567', title: '字符串的排列' },
                { id: '438', title: '找到字符串中所有字母异位词' },
                { id: '30', title: '串联所有单词的子串' },
                { id: '2156', title: '查找给定哈希值的子串', score: '2063' },
                { id: '2953', title: '统计完全子字符串', score: '2449' },
                { id: '1016', title: '子串能表示从 1 到 N 数字的二进制串', desc: '做到 O(|s|)' },
                { id: '3672', title: '子数组中加权众数的总和', vip: true },
                { id: '683', title: 'K 个关闭的灯泡', vip: true, desc: '做到 O(n)' },
                { id: '2067', title: '等计数子串的数量', vip: true },
                { id: '2524', title: '子数组的最大频率分数', vip: true }
              ]
            },
            {
              title: '§1.3 其他（选做）',
              problems: [
                { id: '2200', title: '找出数组中的所有 K 近邻下标', score: '1266', desc: '做法不止一种' },
                { id: '2269', title: '找到一个数字的 K 美丽值', score: '1280' },
                { id: '1984', title: '学生分数的最小差值', score: '1306' },
                { id: '1461', title: '检查一个字符串是否包含所有长度为 K 的二进制子串', score: '1504' },
                { id: '220', title: '存在重复元素 III' }
              ]
            }
          ]
        },
        {
          title: '二、不定长滑动窗口',
          desc: '不定长滑动窗口主要分为三类：求最长子数组，求最短子数组，求子数组个数。\n\n注：滑动窗口相当于在维护一个队列。右指针的移动可以视作入队，左指针的移动可以视作出队。',
          children: [
            {
              title: '§2.1 越短越合法/求最长/最大',
              children: [
                {
                  title: '§2.1.1 基础',
                  problems: [
                    { id: '3', title: '无重复字符的最长子串' },
                    { id: '3090', title: '每个字符最多出现两次的最长子字符串', score: '1329' },
                    { id: '1493', title: '删掉一个元素以后全为 1 的最长子数组', score: '1423' },
                    { id: '3634', title: '使数组平衡的最少移除数目', score: '1453' },
                    { id: '1208', title: '尽可能使字符串相等', score: '1497' },
                    { id: '904', title: '水果成篮', score: '1516' },
                    { id: '1695', title: '删除子数组的最大得分', score: '1529' },
                    { id: '2958', title: '最多 K 个重复元素的最长子数组', score: '1535' },
                    { id: '2024', title: '考试的最大困扰度', score: '1643' },
                    { id: '1004', title: '最大连续 1 的个数 III', score: '1656' },
                    { id: '1658', title: '将 x 减到 0 的最小操作数', score: '1817' },
                    { id: '3641', title: '最长半重复子数组', vip: true }
                  ]
                },
                {
                  title: '§2.1.2 进阶（选做）',
                  problems: [
                    { id: '2730', title: '找到最长的半重复子字符串', desc: '非暴力做法' },
                    { id: '2779', title: '数组的最大美丽值', score: '1638' },
                    { id: '1838', title: '最高频元素的频数', score: '1876' },
                    { id: '2516', title: '每种字符至少取 K 个', score: '1948' },
                    { id: '2831', title: '找出最长等值子数组', score: '1976' },
                    { id: '2271', title: '毯子覆盖的最多白色砖块数', score: '2022' },
                    { id: '2106', title: '摘水果', score: '2062' },
                    { id: '2555', title: '两个线段获得的最多奖品', score: '2081' },
                    { id: '2009', title: '使数组连续的最少操作数', score: '2084' },
                    { id: '1610', title: '可见点的最大数目', score: '2147' },
                    { id: '2781', title: '最长合法子字符串的长度', score: '2204' },
                    { id: '3411', title: '最长乘积等价子数组', score: '2300', desc: '非暴力做法' },
                    { id: '3413', title: '收集连续 K 个袋子可以获得的最多硬币数量', score: '2374' },
                    { id: '395', title: '至少有 K 个重复字符的最长子串' },
                    { id: '1763', title: '最长的美好子字符串', desc: '非暴力做法' },
                    { id: '2968', title: '执行操作使频率分数最大', score: '2444' },
                    { id: '1040', title: '移动石子直到连续 II', score: '2456' },
                    { id: '487', title: '最大连续 1 的个数 II', vip: true },
                    { id: '159', title: '至多包含两个不同字符的最长子串', vip: true },
                    { id: '340', title: '至多包含 K 个不同字符的最长子串', vip: true }
                  ]
                }
              ]
            },
            {
              title: '§2.2 越长越合法/求最短/最小',
              problems: [
                { id: '209', title: '长度最小的子数组' },
                { id: '2904', title: '最短且字典序最小的美丽子字符串', desc: '做到 O(n^2)' },
                { id: '1234', title: '替换子串得到平衡字符串', score: '1878' },
                { id: '2875', title: '无限数组的最短子数组', score: '1914' },
                { id: '76', title: '最小覆盖子串' },
                { id: '632', title: '最小区间', desc: '做法不止一种' }
              ]
            },
            {
              title: '§2.3 求子数组个数',
              children: [
                {
                  title: '§2.3.1 越短越合法',
                  desc: '一般要写 ans += right - left + 1。\n\n内层循环结束后，[left,right] 这个子数组是满足题目要求的。由于子数组越短，越能满足题目要求，所以除了 [left,right]，还有 [left+1,right],[left+2,right],…,[right,right] 都是满足要求的。也就是说，当右端点固定在 right 时，左端点在 left,left+1,left+2,…,right 的所有子数组都是满足要求的，这一共有 right−left+1 个。',
                  problems: [
                    { id: '713', title: '乘积小于 K 的子数组' },
                    { id: '3258', title: '统计满足 K 约束的子字符串数量 I', desc: '做到 O(n)' },
                    { id: '2302', title: '统计得分小于 K 的子数组数目', score: '1808' },
                    { id: '2762', title: '不间断子数组', score: '1940' },
                    { id: 'LCP 68', title: '美观的花束' },
                    { id: '2743', title: '计算没有重复字符的子字符串数量', vip: true },
                    { id: '3134', title: '找出唯一性数组的中位数', score: '2451' },
                    { id: '3261', title: '统计满足 K 约束的子字符串数量 II', score: '2659', desc: '子串的子串' }
                  ]
                },
                {
                  title: '§2.3.2 越长越合法',
                  desc: '一般要写 ans += left。\n\n内层循环结束后，[left,right] 这个子数组是不满足题目要求的，但在退出循环之前的最后一轮循环，[left−1,right] 是满足题目要求的。由于子数组越长，越能满足题目要求，所以除了 [left−1,right]，还有 [left−2,right],[left−3,right],…,[0,right] 都是满足要求的。也就是说，当右端点固定在 right 时，左端点在 0,1,2,…,left−1 的所有子数组都是满足要求的，这一共有 left 个。\n\n我们关注的是 left−1 的合法性，而不是 left。',
                  problems: [
                    { id: '1358', title: '包含所有三种字符的子字符串数目', score: '1646' },
                    { id: '2962', title: '统计最大元素出现至少 K 次的子数组', score: '1701' },
                    { id: '3325', title: '字符至少出现 K 次的子字符串 I', desc: '做到 O(n)' },
                    { id: '2799', title: '统计完全子数组的数目', desc: '做到 O(n)' },
                    { id: '2537', title: '统计好子数组的数目', score: '1892' },
                    { id: '3298', title: '统计重新排列后包含另一个字符串的子字符串数目 II', score: '1909', desc: '同 76 题' },
                    { id: '2495', title: '乘积为偶数的子数组数', vip: true }
                  ]
                },
                {
                  title: '§2.3.3 恰好型滑动窗口',
                  desc: '例如，要计算有多少个元素和恰好等于 k 的子数组，可以把问题变成：\n\n计算有多少个元素和 ≥k 的子数组。\n计算有多少个元素和 >k，也就是 ≥k+1 的子数组。\n答案就是元素和 ≥k 的子数组个数，减去元素和 ≥k+1 的子数组个数。这里把 > 转换成 ≥，从而可以把滑窗逻辑封装成一个函数 solve，然后用 solve(k)−solve(k+1) 计算，无需编写两份滑窗代码。\n\n总结：「恰好」可以拆分成两个「至少」，也就是两个「越长越合法」的滑窗问题。\n\n注：也可以把问题变成 ≤k 减去 ≤k−1，即两个「至多」。可根据题目选择合适的变形方式。\n\n注：也可以把两个滑动窗口合并起来，维护同一个右端点 right 和两个左端点 left1 和 left2 ，我把这种写法叫做三指针滑动窗口。',
                  problems: [
                    { id: '930', title: '和相同的二元子数组', score: '1592' },
                    { id: '1248', title: '统计「优美子数组」', score: '1624' },
                    { id: '3306', title: '元音辅音字符串计数 II', score: '2200' },
                    { id: '992', title: 'K 个不同整数的子数组', score: '2210' }
                  ]
                }
              ]
            },
            {
              title: '§2.4 其他（选做）',
              problems: [
                { id: '825', title: '适龄的朋友', score: '1697' },
                { id: '2401', title: '最长优雅子数组', score: '1750' },
                { id: '1156', title: '单字符重复子串的最大长度', score: '1787', desc: '有简单做法' },
                { id: '424', title: '替换后的最长重复字符' },
                { id: '438', title: '找到字符串中所有字母异位词', desc: '有定长滑窗/不定长滑窗两种写法' },
                { id: '1712', title: '将数组分成三个子数组的方案数', score: '2079' },
                { id: 'LCR 180', title: '文件组合' },
                { id: '1918', title: '第 K 小的子数组和', vip: true }
              ]
            }
          ]
        }
      ]
    }
  },
  'binary-search': {
    title: '二分算法',
    prerequisites: [],
    rootSection: {
      title: '二分算法',
      children: [
        {
          title: '一、二分查找',
          desc: '讲解：二分查找 红蓝染色法【基础算法精讲 04】\n\n设 nums 为递增（非递减）数组，长为 n。\n\n需求\t写法\t如果不存在\n≥x 的第一个元素的下标\tlowerBound(nums,x)\t结果为 n\n>x 的第一个元素的下标\tlowerBound(nums,x+1)\t结果为 n\n<x 的最后一个元素的下标\tlowerBound(nums,x)−1\t结果为 −1\n≤x 的最后一个元素的下标\tlowerBound(nums,x+1)−1\t结果为 −1\n需求\t写法\n<x 的元素个数\tlowerBound(nums,x)\n≤x 的元素个数\tlowerBound(nums,x+1)\n≥x 的元素个数\tn−lowerBound(nums,x)\n>x 的元素个数\tn−lowerBound(nums,x+1)\n注意 <x 和 ≥x 互为补集，二者之和为 n。≤x 和 >x 同理。',
          children: [
            {
              title: '§1.1 基础',
              problems: [
                { id: '34', title: '在排序数组中查找元素的第一个和最后一个位置', desc: '推荐阅读我题解中的答疑' },
                { id: '35', title: '搜索插入位置', desc: '推荐阅读我题解中的答疑' },
                { id: '704', title: '二分查找' },
                { id: '744', title: '寻找比目标字母大的最小字母' },
                { id: '2529', title: '正整数和负整数的最大计数', desc: '做到 O(logn)' }
              ]
            },
            {
              title: '§1.2 进阶',
              desc: '部分题目需要先排序，然后在有序数组上二分查找。',
              problems: [
                { id: '2300', title: '咒语和药水的成功对数', score: '1477' },
                { id: '1385', title: '两个数组间的距离值' },
                { id: '2389', title: '和有限的最长子序列' },
                { id: '1170', title: '比较字符串最小字母出现频次' },
                { id: '2080', title: '区间内查询数字的频率', score: '1702' },
                { id: '3488', title: '距离最小相等元素查询', desc: '做法不止一种' },
                { id: '2563', title: '统计公平数对的数目', score: '1721' },
                { id: '2070', title: '每一个查询的最大美丽值', score: '1724' },
                { id: '1146', title: '快照数组', score: '1771' },
                { id: '981', title: '基于时间的键值存储', desc: '同 1146 题' },
                { id: '3508', title: '设计路由器', score: '1851' },
                { id: '658', title: '找到 K 个最接近的元素' },
                { id: '1818', title: '绝对差值和', score: '1934' },
                { id: '911', title: '在线选举', score: '2001' },
                { id: 'LCP 08', title: '剧情触发时间' },
                { id: '1182', title: '与目标颜色间的最短距离', vip: true },
                { id: '2819', title: '购买巧克力后的最小相对损失', vip: true },
                { id: '1287', title: '有序数组中出现次数超过 25% 的元素', desc: '做到 O(logn)' },
                { id: '2476', title: '二叉搜索树最近节点查询', score: '1597' },
                { id: '1150', title: '检查一个数是否在数组中占绝大多数', vip: true }
              ]
            }
          ]
        },
        {
          title: '二、二分答案',
          desc: '“花费一个 log 的时间，增加了一个条件。” —— 二分答案',
          children: [
            {
              title: '§2.1 求最小',
              desc: '题目求什么，就二分什么。\n\n答疑\n问：如何把二分答案与数组上的二分查找联系起来？\n答：假设答案在区间 [2,5] 中，我们相当于在一个虚拟数组 [check(2),check(3),check(4),check(5)] 中二分找第一个（或者最后一个）值为 true 的 check(x)。这同样可以用红蓝染色法思考。\n\n问：有些题目，明明 m 可以是答案，但却不在初始二分区间中。比如闭区间二分初始化 right=m−1（或者开区间 right=m），这不会算错吗？\n答：不会算错。注意「答案所在区间」和「二分区间」是两个概念。想一想，如果二分的 while 循环每次更新的都是 left，那么最终答案是什么？正好就是 m。一般地，如果一开始就能确定 m 一定可以满足题目要求，那么 m 是不需要在二分区间中的。换句话说，二分区间是「尚未确定是否满足题目要求」的数的范围。那些在区间外面的数，都是已确定的满足（不满足）题目要求的数。\n\n问：什么是循环不变量？\n答：想一想，对于求最小的题目，开区间二分的写法，为什么最终返回的是 right，而不是别的数？在初始化（循环之前）、循环中、循环结束后，都时时刻刻保证 check(right) == true 和 check(left) == false，这就叫循环不变量。根据循环不变量，循环结束时 left+1=right，那么 right 就是最小的满足要求的数（因为再 −1 就不满足要求了），所以答案是 right。\n\n注：部分题目可以优化二分边界，减少二分次数，从而减少代码运行时间。对于初次接触二分答案的同学，无需强求自己写出最优的代码，设定一个比较大的二分上界也是可以的。\n\n开区间二分模板（求最小）：\n```python\nclass Solution:\n    # 计算满足 check(x) == True 的最小整数 x\n    def binarySearchMin(self, nums: List[int]) -> int:\n        # 二分猜答案：判断 mid 是否满足题目要求\n        def check(mid: int) -> bool:\n            # TODO\n\n        left =   # 循环不变量：check(left) 恒为 False\n        right =   # 循环不变量：check(right) 恒为 True\n        while left + 1 < right:  # 开区间不为空\n            mid = (left + right) // 2\n            if check(mid):  # 说明 check(>= mid 的数) 均为 True\n                right = mid  # 接下来在 (left, mid) 中二分答案\n            else:  # 说明 check(<= mid 的数) 均为 False\n                left = mid  # 接下来在 (mid, right) 中二分答案\n        # 循环结束后 left+1 = right\n        # 此时 check(left) == False 而 check(left+1) == check(right) == True\n        # 所以 right 就是最小的满足 check 的值\n        return right\n```',
              problems: [
                { id: '1283', title: '使结果不超过阈值的最小除数', score: '1542' },
                { id: '2187', title: '完成旅途的最少时间', score: '1641' },
                { id: '1011', title: '在 D 天内送达包裹的能力', score: '1725' },
                { id: '875', title: '爱吃香蕉的珂珂', score: '1766' },
                { id: '3296', title: '移山所需的最少秒数', desc: '注：由于有其他做法，难度分会低一些，二分做法估计 1850' },
                { id: '3639', title: '变为活跃状态的最小时间', score: '1853' },
                { id: '475', title: '供暖器' },
                { id: '2594', title: '修车的最少时间', score: '1915' },
                { id: '1482', title: '制作 m 束花所需的最少天数', score: '1946' },
                { id: '3048', title: '标记所有下标的最早秒数 I', score: '2263' },
                { id: '2604', title: '吃掉所有谷子的最短时间', vip: true },
                { id: '2702', title: '使数字变为非正数的最小操作次数', vip: true },
                { id: '1870', title: '准时到达的列车最小时速', score: '1676', desc: '避免浮点数' },
                { id: '3453', title: '分割正方形 I', score: '1735', desc: '浮点二分（也可以避免浮点数）' }
              ]
            },
            {
              title: '§2.2 求最大',
              desc: '一图掌握二分答案！四种写法！\n\n在练习时，请注意「求最小」和「求最大」的二分写法上的区别。\n\n前面的「求最小」和二分查找求「排序数组中某元素的第一个位置」是类似的，按照红蓝染色法，左边是不满足要求的（红色），右边则是满足要求的（蓝色）。\n\n「求最大」的题目则相反，左边是满足要求的（蓝色），右边是不满足要求的（红色）。这会导致二分写法和上面的「求最小」有一些区别。\n\n以开区间二分为例：\n\n求最小：check(mid) == true 时更新 right = mid，反之更新 left = mid，最后返回 right。\n求最大：check(mid) == true 时更新 left = mid，反之更新 right = mid，最后返回 left。\n对于开区间写法，简单来说 check(mid) == true 时更新的是谁，最后就返回谁。相比其他二分写法，开区间写法不需要思考加一减一等细节，推荐使用开区间写二分。\n\n开区间二分模板（求最大）：\n```python\nclass Solution:\n    # 计算满足 check(x) == True 的最大整数 x\n    def binarySearchMax(self, nums: List[int]) -> int:\n        # 二分猜答案：判断 mid 是否满足题目要求\n        def check(mid: int) -> bool:\n            # TODO\n\n        left =   # 循环不变量：check(left) 恒为 True\n        right =   # 循环不变量：check(right) 恒为 False\n        while left + 1 < right:\n            mid = (left + right) // 2\n            if check(mid):\n                left = mid  # 注意这里更新的是 left，和上面的模板反过来\n            else:\n                right = mid\n        # 循环结束后 left+1 = right\n        # 此时 check(left) == True 而 check(left+1) == check(right) == False\n        # 所以 left 就是最大的满足 check 的值\n        return left  # check 更新的是谁，最终就返回谁\n```',
              problems: [
                { id: '275', title: 'H 指数 II' },
                { id: '2226', title: '每个小孩最多能分到多少糖果', score: '1646' },
                { id: '2982', title: '找出出现至少三次的最长特殊子字符串 II', score: '1773' },
                { id: '2576', title: '求出最多标记下标', score: '1843' },
                { id: '1898', title: '可移除字符的最大数目', score: '1913' },
                { id: '1802', title: '有界数组中指定下标处的最大值', score: '1929' },
                { id: '1642', title: '可以到达的最远建筑', score: '1962' },
                { id: '2861', title: '最大合金数', score: '1981' },
                { id: '3007', title: '价值和小于等于 K 的最大数字', score: '2258' },
                { id: '2141', title: '同时运行 N 台电脑的最长时间', score: '2265' },
                { id: '2258', title: '逃离火灾', score: '2347' },
                { id: '2071', title: '你可以安排的最多任务数目', score: '2648' },
                { id: 'LCP 78', title: '城墙防线' },
                { id: '1618', title: '找出适应屏幕的最大字号', vip: true },
                { id: '1891', title: '割绳子', vip: true },
                { id: '2137', title: '通过倒水操作让所有的水桶所含水量相等', vip: true },
                { id: '3344', title: '最大尺寸数组', vip: true },
                { id: '644', title: '子数组最大平均数 II', vip: true }
              ]
            },
            {
              title: '§2.3 二分间接值',
              desc: '二分的不是答案，而是一个和答案有关的值（间接值）。',
              problems: [
                { id: '3143', title: '正方形中的最多点数', score: '1697' },
                { id: '1648', title: '销售价值减少的颜色球', score: '2050' }
              ]
            },
            {
              title: '§2.4 最小化最大值',
              desc: '本质是二分答案求最小。二分的 mid 表示上界。\n\n好比用一个盖子（上界）去压住最大值，看看能否压住（check 函数）。',
              problems: [
                { id: '410', title: '分割数组的最大值' },
                { id: '2064', title: '分配给商店的最多商品的最小值', score: '1886' },
                { id: '3613', title: '最小化连通分量的最大成本', desc: '约 1900' },
                { id: '1760', title: '袋子里最少数目的球', score: '1940' },
                { id: '1631', title: '最小体力消耗路径', score: '1948' },
                { id: '2439', title: '最小化数组中的最大值', score: '1965' },
                { id: '2560', title: '打家劫舍 IV', score: '2081' },
                { id: '778', title: '水位上升的泳池中游泳', score: '2097', desc: '相当于最小化路径最大值' },
                { id: '2616', title: '最小化数对的最大差值', score: '2155' },
                { id: '3419', title: '图的最大边权的最小值', score: '2243' },
                { id: '2513', title: '最小化两个数组中的最大值', score: '2302' },
                { id: '3733', title: '完成所有送货任务的最少时间', desc: '同 2513 题' },
                { id: '3399', title: '字符相同的最短子字符串 II', score: '2376' },
                { id: '3605', title: '数组的最小稳定性因子', score: '2410' },
                { id: 'LCP 12', title: '小张刷题计划' },
                { id: '774', title: '最小化去加油站的最大距离', vip: true }
              ]
            },
            {
              title: '§2.5 最大化最小值',
              desc: '本质是二分答案求最大。二分的 mid 表示下界。',
              problems: [
                { id: '3281', title: '范围内整数的最大得分', score: '1768' },
                { id: '3620', title: '恢复网络路径', score: '1998' },
                { id: '2517', title: '礼盒的最大甜蜜度', score: '2021' },
                { id: '1552', title: '两球之间的磁力', desc: '同 2517 题' },
                { id: '3710', title: '最大划分因子', score: '2135' },
                { id: '2812', title: '找出最安全路径', score: '2154' },
                { id: '2528', title: '最大化城市的最小电量', score: '2236' },
                { id: '3600', title: '升级后最大生成树稳定性', score: '2301', desc: '做法不止一种' },
                { id: '3449', title: '最大化游戏分数的最小值', score: '2748' },
                { id: '3464', title: '正方形上的点之间的最大距离', score: '2806' },
                { id: '1102', title: '得分最高的路径', vip: true },
                { id: '1231', title: '分享巧克力', vip: true }
              ]
            },
            {
              title: '§2.6 第 K 小/大',
              desc: '例如数组 [1,1,1,2,2]，其中第 1 小、第 2 小和第 3 小的数都是 1，第 4 小和第 5 小的数都是 2。\n\n第 k 小等价于：求最小的 x，满足 ≤x 的数至少有 k 个。\n第 k 大等价于：求最大的 x，满足 ≥x 的数至少有 k 个。\n注 1：一般规定 k 从 1 开始，而不是像数组下标那样从 0 开始。\n\n注 2：部分题目也可以用堆解决。',
              problems: [
                { id: '668', title: '乘法表中第 K 小的数' },
                { id: '378', title: '有序矩阵中第 K 小的元素' },
                { id: '719', title: '找出第 K 小的数对距离' },
                { id: '878', title: '第 N 个神奇数字', score: '1897' },
                { id: '1201', title: '丑数 III', score: '2039' },
                { id: '793', title: '阶乘函数后 K 个零', score: '2100' },
                { id: '373', title: '查找和最小的 K 对数字' },
                { id: '1439', title: '有序矩阵中的第 k 个最小数组和', score: '2134' },
                { id: '786', title: '第 K 个最小的质数分数', score: '2169' },
                { id: '3116', title: '单面值组合的第 K 小金额', score: '2387' },
                { id: '3134', title: '找出唯一性数组的中位数', score: '2451' },
                { id: '2040', title: '两个有序数组的第 K 小乘积', score: '2518' },
                { id: '2386', title: '找出数组的第 K 大和', score: '2648', desc: '转化' },
                { id: '1508', title: '子数组和排序后的区间和' },
                { id: '3691', title: '最大子数组总值 II', desc: '做到时间复杂度与 k 无关' },
                { id: '3520', title: '逆序对计数的最小阈值', vip: true },
                { id: '1918', title: '第 K 小的子数组和', vip: true }
              ]
            }
          ]
        },
        {
          title: '三、三分法',
          problems: [
            { id: '1515', title: '服务中心的最佳位置', score: '2157', desc: '做法不止一种' }
          ]
        },
        {
          title: '四、其他',
          problems: [
            { id: '69', title: 'x 的平方根', desc: '二分求最大的 m，满足 m^2 ≤x（也可以二分求最小的满足 m^2 >x 的 m，减一得到答案）' },
            { id: '74', title: '搜索二维矩阵' },
            { id: '278', title: '第一个错误的版本' },
            { id: '374', title: '猜数字大小' },
            { id: '162', title: '寻找峰值' },
            { id: '1901', title: '寻找峰值 II' },
            { id: '852', title: '山脉数组的峰顶索引' },
            { id: '1095', title: '山脉数组中查找目标值', score: '1827' },
            { id: '153', title: '寻找旋转排序数组中的最小值' },
            { id: '154', title: '寻找旋转排序数组中的最小值 II' },
            { id: '33', title: '搜索旋转排序数组' },
            { id: '81', title: '搜索旋转排序数组 II' },
            { id: '222', title: '完全二叉树的节点个数' },
            { id: '1539', title: '第 k 个缺失的正整数' },
            { id: '540', title: '有序数组中的单一元素' },
            { id: '4', title: '寻找两个正序数组的中位数' },
            { id: '1064', title: '不动点', vip: true },
            { id: '702', title: '搜索长度未知的有序数组', vip: true },
            { id: '2936', title: '包含相等值数字块的数量', vip: true },
            { id: '1060', title: '有序数组中的缺失元素', vip: true },
            { id: '1198', title: '找出所有行中最小公共元素', vip: true },
            { id: '1428', title: '至少有一个 1 的最左端列', vip: true },
            { id: '1533', title: '找到最大整数的索引', vip: true },
            { id: '2387', title: '行排序矩阵的中位数', vip: true },
            { id: '302', title: '包含全部黑色像素的最小矩形', vip: true }
          ]
        }
      ]
    }
  },
  'monotonic-stack': {
    title: '单调栈',
    prerequisites: [],
    rootSection: {
      title: '单调栈',
      children: [
        {
          title: '一、单调栈',
          children: [
            {
              title: '§1.1 基础',
              desc: '原理讲解：单调栈【基础算法精讲 26】\n\n模板：\n```python\ndef nearestGreater(nums: List[int]) -> Tuple[List[int], List[int]]:\n    n = len(nums)\n    # left[i] 是 nums[i] 左侧最近的严格大于 nums[i] 的数的下标，若不存在则为 -1\n    left = [-1] * n\n    st = []\n    for i, x in enumerate(nums):\n        while st and nums[st[-1]] <= x:  # 如果求严格小于，改成 >=\n            st.pop()\n        if st:\n            left[i] = st[-1]\n        st.append(i)\n\n    # right[i] 是 nums[i] 右侧最近的严格大于 nums[i] 的数的下标，若不存在则为 n\n    right = [n] * n\n    st = []\n    for i in range(n - 1, -1, -1):\n        x = nums[i]\n        while st and nums[st[-1]] <= x:\n            st.pop()\n        if st:\n            right[i] = st[-1]\n        st.append(i)\n\n    return left, right\n```',
              problems: [
                { id: '739', title: '每日温度' },
                { id: '1475', title: '商品折扣后的最终价格', desc: '非暴力做法' },
                { id: '496', title: '下一个更大元素 I' },
                { id: '503', title: '下一个更大元素 II' },
                { id: '901', title: '股票价格跨度', score: '1709' },
                { id: '853', title: '车队' }
              ]
            },
            {
              title: '§1.2 进阶（选做）',
              problems: [
                { id: '1019', title: '链表中的下一个更大节点', score: '1571' },
                { id: '768', title: '最多能完成排序的块 II', score: '1788' },
                { id: '654', title: '最大二叉树', desc: '做到 O(n)' },
                { id: '456', title: '132 模式', desc: '约 2000' },
                { id: '3113', title: '边界元素是最大值的子数组数目', score: '2046' },
                { id: '2866', title: '美丽塔 II', score: '2072' },
                { id: '1944', title: '队列中可以看到的人数', score: '2105' },
                { id: '2454', title: '下一个更大元素 IV', score: '2175' },
                { id: '1130', title: '叶值的最小代价生成树', desc: 'O(n) 做法' },
                { id: '2289', title: '使数组按非递减顺序排列', score: '2482' },
                { id: '1776', title: '车队 II', score: '2531' },
                { id: '2736', title: '最大和查询', score: '2533' },
                { id: '3420', title: '统计 K 次操作以内得到非递减子数组的数目', score: '2855', desc: '树形结构' },
                { id: '3221', title: '最大数组跳跃得分 II', vip: true },
                { id: '1966', title: '未排序数组中的可被二分搜索的数', vip: true },
                { id: '2832', title: '每个元素为最大值的最大范围', vip: true },
                { id: '2282', title: '在一个网格中可以看到的人数', vip: true },
                { id: '3555', title: '排序每个滑动窗口中最小的子数组', vip: true, desc: '非暴力做法' },
                { id: '962', title: '最大宽度坡', score: '1608' },
                { id: '3542', title: '将所有元素变为 0 的最少操作次数', score: '1890' },
                { id: '1124', title: '表现良好的最长时间段', score: '1908' }
              ]
            }
          ]
        },
        {
          title: '二、矩形',
          problems: [
            { id: '84', title: '柱状图中最大的矩形' },
            { id: '1793', title: '好子数组的最大分数', score: '1946' },
            { id: '85', title: '最大矩形' },
            { id: '221', title: '最大正方形' },
            { id: '42', title: '接雨水', desc: '做法不止一种' },
            { id: '1504', title: '统计全 1 子矩形' },
            { id: '1277', title: '统计全为 1 的正方形子矩阵' },
            { id: '755', title: '倒水', vip: true }
          ]
        },
        {
          title: '三、贡献法',
          problems: [
            { id: '907', title: '子数组的最小值之和', score: '1976' },
            { id: '2104', title: '子数组范围和（最大值-最小值）', desc: 'O(n) 做法难度大约 2000' },
            { id: '1856', title: '子数组最小乘积的最大值', score: '2051' },
            { id: '2818', title: '操作使得分最大', score: '2397' },
            { id: '2281', title: '巫师的总力量和（最小值×和）', score: '2621' },
            { id: '3430', title: '最多 K 个元素的子数组的最值之和', score: '2645' },
            { id: '3359', title: '查找最大元素不超过 K 的有序子矩阵', vip: true, desc: '矩形' },
            { id: '2334', title: '元素值大于变化阈值的子数组', score: '2381' },
            { id: '2962', title: '统计最大元素出现至少 K 次的子数组', desc: '我的题解 中的思考题（解答见评论）' }
          ]
        },
        {
          title: '四、最小字典序',
          problems: [
            { id: '402', title: '移掉 K 位数字', desc: '约 1800' },
            { id: '1673', title: '找出最具竞争力的子序列', score: '1802' },
            { id: '316', title: '去除重复字母', score: '2185', desc: '扩展：重复个数不超过 limit' },
            { id: '1081', title: '不同字符的最小子序列', desc: '同 316 题' },
            { id: '321', title: '拼接最大数' },
            { id: '2030', title: '含特定字母的最小子序列', score: '2562' }
          ]
        }
      ]
    }
  },
  'grid-graph': {
    title: '网格图',
    prerequisites: [],
    rootSection: {
      title: '网格图',
      children: [
        {
          title: '一、网格图 DFS',
          desc: '适用于需要计算连通块个数、大小的题目。\n\n部分题目做法不止一种，也可以用 BFS 或并查集解决。\n\n二叉树 DFS 与网格图 DFS 的区别：\n\n二叉树\t网格图\n递归入口\t根节点\t网格图的某个格子\n递归方向\t左儿子和右儿子\t一般为左右上下的相邻格子\n递归边界\t空节点（或者叶节点）\t出界、遇到障碍或者已访问',
          problems: [
            { id: '200', title: '岛屿数量' },
            { id: '695', title: '岛屿的最大面积' },
            { id: '3619', title: '总价值可以被 K 整除的岛屿数目', score: '1461' },
            { id: '面试题 16.19', title: '水域大小' },
            { id: 'LCS 03', title: '主题空间' },
            { id: '463', title: '岛屿的周长' },
            { id: '2658', title: '网格图中鱼的最大数目', score: '1490' },
            { id: '733', title: '图像渲染' },
            { id: '1034', title: '边界着色', score: '1579' },
            { id: '1020', title: '飞地的数量', score: '1615' },
            { id: '2684', title: '矩阵中移动的最大次数', score: '1626' },
            { id: '1254', title: '统计封闭岛屿的数目', score: '1659' },
            { id: '130', title: '被围绕的区域' },
            { id: '1905', title: '统计子岛屿', score: '1679' },
            { id: '1391', title: '检查网格中是否存在有效路径', score: '1746' },
            { id: '417', title: '太平洋大西洋水流问题' },
            { id: '529', title: '扫雷游戏' },
            { id: '1559', title: '二维网格图中探测环', score: '1838' },
            { id: '827', title: '最大人工岛', score: '1934', desc: '我的题解有变形题' },
            { id: 'LCP 63', title: '弹珠游戏', desc: '也可以不用 DFS' },
            { id: '305', title: '岛屿数量 II', vip: true },
            { id: '2061', title: '扫地机器人清扫过的空间个数', vip: true, desc: '也可以迭代' },
            { id: '2852', title: '所有单元格的远离程度之和', vip: true },
            { id: '489', title: '扫地机器人', vip: true }
          ]
        },
        {
          title: '二、网格图 BFS',
          desc: '适用于需要计算最短距离（最短路）的题目。\n\nDFS 是不撞南墙不回头；BFS 是先访问近的，再访问远的。',
          problems: [
            { id: '1926', title: '迷宫中离入口最近的出口', score: '1638' },
            { id: '1091', title: '二进制矩阵中的最短路径', score: '1658' },
            { id: '1162', title: '地图分析', score: '1666' },
            { id: '542', title: '01 矩阵' },
            { id: '994', title: '腐烂的橘子' },
            { id: '1765', title: '地图中的最高点', score: '1783' },
            { id: '934', title: '最短的桥', score: '1826' },
            { id: '2146', title: '价格范围内最高排名的 K 样物品', score: '1837' },
            { id: '1293', title: '网格中的最短路径', score: '1967' },
            { id: '909', title: '蛇梯棋', score: '2020' },
            { id: '1210', title: '穿过迷宫的最少移动次数', score: '2022' },
            { id: '675', title: '为高尔夫比赛砍树' },
            { id: '2812', title: '找出最安全路径', score: '2154' },
            { id: '749', title: '隔离病毒', score: '2277' },
            { id: '1730', title: '获取食物的最短路径', vip: true },
            { id: '286', title: '墙与门', vip: true },
            { id: '490', title: '迷宫', vip: true },
            { id: '505', title: '迷宫 II', vip: true },
            { id: '499', title: '迷宫 III', vip: true },
            { id: '317', title: '离建筑物最近的距离', vip: true },
            { id: '2814', title: '避免淹死并到达目的地的最短时间', vip: true }
          ]
        },
        {
          title: '三、网格图 0-1 BFS',
          desc: '边权只有 0 和 1 的题目，也可以用 BFS 做。',
          problems: [
            { id: '3286', title: '穿越网格图的安全路径', desc: '做到 O(mn)' },
            { id: '2290', title: '到达角落需要移除障碍物的最小数目', score: '2138' },
            { id: '1368', title: '使网格图至少有一条有效路径的最小代价', score: '2069' },
            { id: '3552', title: '网格传送门旅游', score: '2036' },
            { id: '1824', title: '最少侧跳次数' },
            { id: 'LCP 56', title: '信物传送' }
          ]
        },
        {
          title: '四、网格图 Dijkstra',
          desc: '见 图论题单 中的 Dijkstra。'
        },
        {
          title: '五、综合应用',
          problems: [
            { id: '1631', title: '最小体力消耗路径', score: '1948' },
            { id: '778', title: '水位上升的泳池中游泳', score: '2097' },
            { id: '329', title: '矩阵中的最长递增路径' },
            { id: '3568', title: '清理教室的最少移动', score: '2143', desc: '状压 BFS（分层图最短路）' },
            { id: '1036', title: '逃离大迷宫', score: '2165' },
            { id: '864', title: '获取所有钥匙的最短路径', score: '2259', desc: '状压 BFS（分层图最短路）' },
            { id: '1263', title: '推箱子', score: '2297' },
            { id: '2258', title: '逃离火灾', score: '2347' },
            { id: '2556', title: '二进制矩阵中翻转最多一次使路径不连通', score: '2369' },
            { id: '2577', title: '在网格图中访问一个格子的最少时间', score: '2382' },
            { id: '2617', title: '网格图中最少访问的格子数', score: '2582' },
            { id: 'LCP 13', title: '寻宝', desc: '状压 DP' },
            { id: 'LCP 31', title: '变换的迷宫' },
            { id: 'LCP 45', title: '自行车炫技赛场' },
            { id: 'LCP 75', title: '传送卷轴' },
            { id: '1778', title: '未知网格中的最短路径', vip: true },
            { id: '694', title: '不同岛屿的数量', vip: true },
            { id: '711', title: '不同岛屿的数量 II', vip: true },
            { id: '1102', title: '得分最高的路径', vip: true }
          ]
        }
      ]
    }
  },
  'bit-manipulation': {
    title: '位运算',
    prerequisites: [],
    rootSection: {
      title: '位运算',
      children: [
        {
          title: '一、基础题',
          children: [
            {
              title: '§1.1 基础',
              problems: [
                { id: '3370', title: '仅含置位位的最小整数', score: '1199' },
                { id: '3226', title: '使两个整数相等的位更改次数', score: '1247' },
                { id: '1356', title: '根据数字二进制下 1 的数目排序', score: '1258' },
                { id: '461', title: '汉明距离', score: '1282' },
                { id: '2220', title: '转换数字的最少位翻转次数', score: '1282', desc: '同 461 题' },
                { id: '1342', title: '将数字变成 0 的操作次数', desc: '做到 O(1)' },
                { id: '476', title: '数字的补数', desc: '做到 O(1)' },
                { id: '1009', title: '十进制整数的反码', desc: '同 476 题' },
                { id: '868', title: '二进制间距', score: '1307' },
                { id: '2917', title: '找出数组中的 K-or 值', score: '1389' },
                { id: '693', title: '交替位二进制数' },
                { id: '2657', title: '找到两个数组的前缀公共数组' },
                { id: '面试题 05.01', title: '插入' },
                { id: '231', title: '2 的幂' },
                { id: '342', title: '4 的幂' },
                { id: '191', title: '位 1 的个数' },
                { id: '338', title: '比特位计数', desc: '也可以 DP' },
                { id: '2595', title: '奇偶位数', desc: '做到 O(1)' },
                { id: '2154', title: '将找到的值乘以 2', desc: '要求：O(n) 时间，O(1) 空间' },
                { id: '3211', title: '生成不含相邻零的二进制字符串' }
              ]
            },
            {
              title: '§1.2 用位运算代替数组操作',
              problems: [
                { id: '3690', title: '拆分合并数组' }
              ]
            }
          ]
        },
        {
          title: '二、异或（XOR）的性质',
          desc: '本质是模 2 剩余系的加法。',
          problems: [
            { id: '1486', title: '数组异或操作', score: '1181' },
            { id: '1720', title: '解码异或后的数组', score: '1284' },
            { id: '2433', title: '找出前缀异或的原始数组', score: '1367' },
            { id: '1310', title: '子数组异或查询', score: '1460' },
            { id: '2683', title: '相邻值的按位异或', score: '1518' },
            { id: '1829', title: '每个查询的最大异或值', score: '1523' },
            { id: '2997', title: '使数组异或和等于 K 的最少操作次数', score: '1525' },
            { id: '1442', title: '形成两个异或相等数组的三元组数目', score: '1525' },
            { id: '2429', title: '最小异或', score: '1532' },
            { id: '2527', title: '查询数组异或美丽值', score: '1550' },
            { id: '2317', title: '操作后的最大异或和', score: '1679' },
            { id: '2588', title: '统计美丽子数组数目', score: '1697' },
            { id: '2564', title: '子字符串异或查询', score: '1959' },
            { id: '1734', title: '解码异或后的排列', score: '2024' },
            { id: '2857', title: '统计距离为 k 的点对', score: '2082' },
            { id: '1803', title: '统计异或值在范围内的数对有多少', score: '2479' },
            { id: '3215', title: '用偶数异或设置位计数三元组 II', vip: true }
          ]
        },
        {
          title: '三、与或（AND/OR）的性质',
          desc: 'AND 的数越多，结果越小。\nOR 的数越多，结果越大。',
          children: [
            {
              title: '§3.1 基础',
              problems: [
                { id: '2980', title: '检查按位或是否存在尾随零', score: '1234' },
                { id: '1318', title: '或运算的最小翻转次数', score: '1383' },
                { id: '2419', title: '按位与最大的最长子数组', score: '1496' },
                { id: '2871', title: '将数组分割成最多数目的子数组', score: '1750' },
                { id: '2401', title: '最长优雅子数组', score: '1750' },
                { id: '2680', title: '最大或值', score: '1912', desc: '可以做到 O(1) 额外空间' },
                { id: '3133', title: '数组最后一个元素的最小值', score: '1935' },
                { id: '3108', title: '带权图里旅途的最小代价', score: '2109' },
                { id: '3117', title: '划分数组得到最小的值之和', score: '2735' },
                { id: '3125', title: '使得按位与结果为 0 的最大数字', vip: true }
              ]
            },
            {
              title: '§3.2 AND/OR LogTrick',
              desc: 'LogTrick 入门教程，包含原地写法，以及额外维护一个列表的写法。\n\n模板：\n```python\n# 对于每个右端点 i，计算所有子数组的或值，打印这些或值的分布范围（子数组左端点范围）\n# 时间复杂度 O(nlogU)，其中 U = max(nums)\ndef logTrick(nums: List[int]) -> None:\n    or_left = []  # (子数组或值，最小左端点)\n    for i, x in enumerate(nums):\n        # 计算以 i 为右端点的子数组或值\n        for p in or_left:\n            p[0] |= x  # **根据题目修改**\n        # x 单独一个数作为子数组\n        or_left.append([x, i])\n\n        # 原地去重（相同或值只保留最左边的）\n        idx = 1\n        for j in range(1, len(or_left)):\n            if or_left[j][0] != or_left[j - 1][0]:\n                or_left[idx] = or_left[j]\n                idx += 1\n        del or_left[idx:]\n\n        print(i, x)\n        for k, (or_val, left) in enumerate(or_left):\n            right = or_left[k + 1][1] - 1 if k < len(or_left) - 1 else i\n            # 对于左端点在 [left, right]，右端点为 i 的子数组，OR 值都是 or_val\n            print(left, right, or_val)\n```',
              problems: [
                { id: '3171', title: '找到按位或最接近 K 的子数组', desc: '例题' },
                { id: '1521', title: '找到最接近目标值的函数值', desc: '同 3171 题，OR 改成 AND' },
                { id: '3097', title: '或值至少为 K 的最短子数组 II', score: '1891' },
                { id: '2411', title: '按位或最大的最小子数组长度', score: '1938' },
                { id: '3209', title: '子数组按位与值为 K 的数目', score: '2050' },
                { id: '898', title: '子数组按位或操作' }
              ]
            },
            {
              title: '§3.3 GCD LogTrick',
              problems: [
                { id: '2447', title: '最大公因数等于 K 的子数组数目', desc: '非暴力做法' },
                { id: '2654', title: '使数组所有元素变成 1 的最少操作次数', desc: '非暴力做法' },
                { id: '3605', title: '数组的最小稳定性因子', score: '2410' },
                { id: '3574', title: '最大子数组 GCD 分数', desc: '非暴力做法' },
                { id: '2941', title: '子数组的最大 GCD-Sum', vip: true }
              ]
            }
          ]
        },
        {
          title: '四、拆位 / 贡献法',
          children: [
            {
              title: '§4.1 基础',
              problems: [
                { id: '477', title: '汉明距离总和' },
                { id: '1863', title: '找出所有子集的异或总和再求和', desc: '可以做到 O(n) 时间' },
                { id: '2425', title: '所有数对的异或和', score: '1622', desc: '可以做到 O(n+m) 时间' },
                { id: '2275', title: '按位与结果大于零的最长组合', score: '1642' },
                { id: '1835', title: '所有数对按位与结果的异或和', score: '1825', desc: '也有恒等式做法' },
                { id: '3688', title: '偶数的按位或运算', desc: '看我题解中的思考题（解答见评论）' },
                { id: '2505', title: '所有子序列和的按位或', vip: true }
              ]
            },
            {
              title: '§4.2 十进制拆位',
              problems: [
                { id: '3153', title: '所有数对中数位不同之和', score: '1645' }
              ]
            }
          ]
        },
        {
          title: '五、试填法',
          problems: [
            { id: '421', title: '数组中两个数的最大异或值' },
            { id: '2935', title: '找出强数对的最大异或值 II', score: '2349' },
            { id: '3007', title: '价值和小于等于 K 的最大数字' },
            { id: '3145', title: '大数组元素的乘积', score: '2859' },
            { id: '3022', title: '给定操作次数内使剩余元素的或值最小', score: '2918' },
            { id: '3287', title: '求出数组中最大序列值', desc: '做到 O(nUlogU)，其中 U=2^7' },
            { id: '3344', title: '最大尺寸数组', vip: true }
          ]
        },
        {
          title: '六、恒等式',
          problems: [
            { id: '1835', title: '所有数对按位与结果的异或和', score: '1825' },
            { id: '2354', title: '优质数对的数目', score: '2076' }
          ]
        },
        {
          title: '七、线性基',
          desc: '模板（最大异或和）：\n```python\nclass XorBasis:\n    # n 为值域最大值 U 的二进制长度，例如 U=1e9 时 n=30\n    def __init__(self, n: int):\n        self.b = [0] * n\n\n    def insert(self, x: int) -> None:\n        b = self.b\n        # 从高到低遍历，保证计算 max_xor 的时候，参与 XOR 的基的最高位（或者说二进制长度）是互不相同的\n        for i in range(len(b) - 1, -1, -1):\n            if x >> i:  # 由于大于 i 的位都被我们异或成了 0，所以 x >> i 的结果只能是 0 或 1\n                if b[i] == 0:  # x 和之前的基是线性无关的\n                    b[i] = x  # 新增一个基，最高位为 i\n                    return\n                x ^= b[i]  # 保证每个基的二进制长度互不相同\n        # 正常循环结束，此时 x=0，说明一开始的 x 可以被已有基表出，不是一个线性无关基\n\n    def max_xor(self) -> int:\n        b = self.b\n        res = 0\n        # 从高到低贪心：越高的位，越必须是 1\n        # 由于每个位的基至多一个，所以每个位只需考虑异或一个基，若能变大，则异或之\n        for i in range(len(b) - 1, -1, -1):\n            if res ^ b[i] > res:  # 手写 max 更快\n                res ^= b[i]\n        return res\n```',
          problems: [
            { id: '3681', title: '子序列最大 XOR 值', desc: '模板题' },
            { id: '3630', title: '划分数组得到最大异或运算和与运算之和', score: '2744' }
          ]
        },
        {
          title: '八、思维题',
          desc: '贪心、脑筋急转弯等。',
          problems: [
            { id: '2546', title: '执行逐位运算使字符串相等', score: '1605' },
            { id: '1558', title: '得到目标数组的最少函数调用次数', score: '1637' },
            { id: '2571', title: '将整数减少到零需要的最少操作数', score: '1649', desc: '巧妙结论' },
            { id: '3315', title: '构造最小位运算数组 II', score: '1715' },
            { id: '2568', title: '最小无法得到的或值', score: '1754' },
            { id: '3644', title: '排序排列', score: '1775' },
            { id: '2509', title: '查询树中环的长度', score: '1948' },
            { id: '2939', title: '最大异或乘积', score: '2128' },
            { id: '2749', title: '得到整数零需要执行的最少操作数', score: '2132' },
            { id: '2835', title: '使子序列的和等于目标的最少操作次数', score: '2207' },
            { id: '2897', title: '对数组执行操作使平方和最大', score: '2301' },
            { id: '810', title: '黑板异或游戏', score: '2341' },
            { id: '3064', title: '使用按位查询猜测数字 I', vip: true },
            { id: '3094', title: '使用按位查询猜测数字 II', vip: true }
          ]
        },
        {
          title: '九、其他',
          problems: [
            { id: '136', title: '只出现一次的数字' },
            { id: '260', title: '只出现一次的数字 III' },
            { id: '2965', title: '找出缺失和重复的数字' },
            { id: '137', title: '只出现一次的数字 II' },
            { id: '645', title: '错误的集合' },
            { id: '190', title: '颠倒二进制位' },
            { id: '371', title: '两整数之和' },
            { id: '201', title: '数字范围按位与' },
            { id: '2438', title: '二的幂数组中查询范围内的乘积', score: '1610' },
            { id: '1680', title: '连接连续二进制数字', score: '1630' },
            { id: '1261', title: '在受污染的二叉树中查找元素', desc: '做到 O(1) 额外空间' },
            { id: '89', title: '格雷编码' },
            { id: '1238', title: '循环码排列', score: '1775' },
            { id: '982', title: '按位与为零的三元组', score: '2085' },
            { id: '3307', title: '找出第 K 个字符 II', score: '2232' },
            { id: '1611', title: '使整数变为 0 的最少操作次数', score: '2345' },
            { id: '3514', title: '不同 XOR 三元组的数目 II', desc: '快速沃尔什变换（FWT）' },
            { id: 'LCP 81', title: '与非的谜题' },
            { id: '751', title: 'IP 到 CIDR', vip: true },
            { id: '3595', title: '一次或两次', vip: true, desc: '结合 137 和 260 的思路' },
            { id: '3141', title: '最大汉明距离', vip: true }
          ]
        }
      ]
    }
  },
  'graph-algorithms': {
    title: '图论算法',
    prerequisites: [],
    problems: []
  },
  'dynamic-programming': {
    title: '动态规划',
    prerequisites: [],
    problems: []
  },
  'data-structures': {
    title: '常用数据结构',
    prerequisites: [],
    rootSection: {
      title: '常用数据结构',
      children: [
      {
            "title": "一、前缀和",
            "children": [
                  {
                        "title": "§1.1 基础",
                        "problems": [
                              {
                                    "id": "303",
                                    "title": "区域和检索",
                                    "desc": "- 数组不可变 模板题"
                              },
                              {
                                    "id": "3427",
                                    "title": "变长子数组求和",
                                    "desc": "做到 O(n)"
                              },
                              {
                                    "id": "2559",
                                    "title": "统计范围内的元音字符串数",
                                    "score": "1435"
                              },
                              {
                                    "id": "1310",
                                    "title": "子数组异或查询",
                                    "score": "1460"
                              },
                              {
                                    "id": "3152",
                                    "title": "特殊数组",
                                    "desc": "II 1523"
                              },
                              {
                                    "id": "1749",
                                    "title": "任意子数组和的绝对值的最大值",
                                    "score": "1542"
                              },
                              {
                                    "id": "53",
                                    "title": "最大子数组和"
                              },
                              {
                                    "id": "3652",
                                    "title": "按策略买卖股票的最佳时机",
                                    "score": "1557"
                              },
                              {
                                    "id": "3361",
                                    "title": "两个字符串的切换距离"
                              },
                              {
                                    "id": "3511",
                                    "title": "构造正数组",
                                    "vip": true
                              },
                              {
                                    "id": "3540",
                                    "title": "访问所有房屋的最短时间",
                                    "vip": true
                              },
                              {
                                    "id": "1523",
                                    "title": "在区间范围内统计奇数数目",
                                    "score": "1209"
                              }
                        ],
                        "desc": "讲解\n左闭右开公式：子数组 [left,right) 的元素和为 sum[right]−sum[left]。把下标区间定义成左闭右开，就不需要加一减一了。\n思维扩展："
                  },
                  {
                        "title": "§1.2 前缀和与哈希表",
                        "problems": [
                              {
                                    "id": "560",
                                    "title": "和为",
                                    "desc": "K 的子数组"
                              },
                              {
                                    "id": "930",
                                    "title": "和相同的二元子数组",
                                    "score": "1592"
                              },
                              {
                                    "id": "1524",
                                    "title": "和为奇数的子数组数目",
                                    "score": "1611"
                              },
                              {
                                    "id": "974",
                                    "title": "和可被",
                                    "desc": "K 整除的子数组 1676"
                              },
                              {
                                    "id": "523",
                                    "title": "连续的子数组和",
                                    "desc": "类似 974 题"
                              },
                              {
                                    "id": "2588",
                                    "title": "统计美丽子数组数目",
                                    "score": "1697"
                              },
                              {
                                    "id": "525",
                                    "title": "连续数组",
                                    "desc": "0 和 1 个数相同的最长子数组"
                              },
                              {
                                    "id": "面试题 17.05",
                                    "title": "字母与数字",
                                    "desc": "同 525 题"
                              },
                              {
                                    "id": "3026",
                                    "title": "最大好子数组和",
                                    "score": "1817"
                              },
                              {
                                    "id": "1477",
                                    "title": "找两个和为目标值且不重叠的子数组",
                                    "score": "1851"
                              },
                              {
                                    "id": "1546",
                                    "title": "和为目标值且不重叠的非空子数组的最大数目",
                                    "score": "1855"
                              },
                              {
                                    "id": "1124",
                                    "title": "表现良好的最长时间段",
                                    "score": "1908"
                              },
                              {
                                    "id": "3728",
                                    "title": "边界与内部和相等的稳定子数组",
                                    "score": "1909",
                                    "desc": "pair 长度有下界"
                              },
                              {
                                    "id": "3381",
                                    "title": "长度可被",
                                    "desc": "K 整除的子数组的最大元素和 1943"
                              },
                              {
                                    "id": "2488",
                                    "title": "统计中位数为",
                                    "desc": "K 的子数组 1999"
                              },
                              {
                                    "id": "1590",
                                    "title": "使数组和能被",
                                    "desc": "P 整除 2039"
                              },
                              {
                                    "id": "2845",
                                    "title": "统计趣味子数组的数目",
                                    "score": "2073"
                              },
                              {
                                    "id": "3739",
                                    "title": "统计主要元素子数组数目",
                                    "desc": "II 2090"
                              },
                              {
                                    "id": "1074",
                                    "title": "元素和为目标值的子矩阵数量",
                                    "score": "2189",
                                    "desc": "二维版本的 560 题"
                              },
                              {
                                    "id": "1442",
                                    "title": "形成两个异或相等数组的三元组数目",
                                    "desc": "做到 O(n)"
                              },
                              {
                                    "id": "3714",
                                    "title": "最长的平衡子串",
                                    "desc": "II 2202 pair"
                              },
                              {
                                    "id": "2025",
                                    "title": "分割数组的最多方案数",
                                    "score": "2218"
                              },
                              {
                                    "id": "3729",
                                    "title": "统计有序数组中可被",
                                    "desc": "K 整除的子数组数量 2248 子数组去重 / 避免重复统计"
                              },
                              {
                                    "id": "2949",
                                    "title": "统计美丽子字符串",
                                    "desc": "II 2445 pair"
                              },
                              {
                                    "id": "325",
                                    "title": "和等于",
                                    "desc": "k 的最长子数组长度（会员题）"
                              },
                              {
                                    "id": "548",
                                    "title": "将数组分割成和相等的子数组",
                                    "vip": true
                              },
                              {
                                    "id": "1983",
                                    "title": "范围和相等的最宽索引对",
                                    "vip": true
                              },
                              {
                                    "id": "2489",
                                    "title": "固定比率的子字符串数",
                                    "vip": true
                              },
                              {
                                    "id": "2031",
                                    "title": "1",
                                    "desc": "比 0 多的子数组个数（会员题）做到 O(n)"
                              },
                              {
                                    "id": "2950",
                                    "title": "可整除子串的数量做到",
                                    "desc": "O(kn)，其中 k=9。",
                                    "vip": true
                              },
                              {
                                    "id": "3364",
                                    "title": "最小正和子数组",
                                    "desc": "非暴力做法"
                              },
                              {
                                    "id": "363",
                                    "title": "矩形区域不超过",
                                    "desc": "K 的最大数值和"
                              },
                              {
                                    "id": "3739",
                                    "title": "统计主要元素子数组数目",
                                    "desc": "II 2090"
                              },
                              {
                                    "id": "2031",
                                    "title": "1",
                                    "desc": "比 0 多的子数组个数（会员题）有 O(n) 做法"
                              },
                              {
                                    "id": "437",
                                    "title": "路径总和",
                                    "desc": "III"
                              }
                        ],
                        "desc": "通常要用到「枚举右，维护左」的技巧。\n讲解\n前缀和与有序集合：\n思维扩展："
                  },
                  {
                        "title": "§1.3 距离和",
                        "problems": [
                              {
                                    "id": "1685",
                                    "title": "有序数组中差绝对值之和",
                                    "score": "1496"
                              },
                              {
                                    "id": "2615",
                                    "title": "等值距离和",
                                    "score": "1793"
                              },
                              {
                                    "id": "2602",
                                    "title": "使数组元素全部相等的最少操作次数",
                                    "score": "1903"
                              },
                              {
                                    "id": "2968",
                                    "title": "执行操作使频率分数最大",
                                    "score": "2444"
                              },
                              {
                                    "id": "1703",
                                    "title": "得到连续",
                                    "desc": "K 个 1 的最少相邻交换次数 2467"
                              },
                              {
                                    "id": "3086",
                                    "title": "拾起",
                                    "desc": "K 个 1 需要的最少行动次数 2673"
                              },
                              {
                                    "id": "3422",
                                    "title": "将子数组元素变为相等所需的最小操作数",
                                    "vip": true
                              }
                        ],
                        "desc": "图解"
                  },
                  {
                        "title": "§1.4 状态压缩前缀和",
                        "problems": [
                              {
                                    "id": "1177",
                                    "title": "构建回文串检测",
                                    "score": "1848"
                              },
                              {
                                    "id": "1371",
                                    "title": "每个元音包含偶数次的最长子字符串",
                                    "score": "2041"
                              },
                              {
                                    "id": "1542",
                                    "title": "找出最长的超赞子字符串",
                                    "score": "2222"
                              },
                              {
                                    "id": "1915",
                                    "title": "最美子字符串的数目",
                                    "score": "2235"
                              },
                              {
                                    "id": "2791",
                                    "title": "树中可以形成回文的路径数",
                                    "score": "2677"
                              }
                        ],
                        "desc": "推荐先阅读：从集合论到位运算，常见位运算技巧分类总结！"
                  },
                  {
                        "title": "§1.5 进阶",
                        "problems": [
                              {
                                    "id": "2389",
                                    "title": "和有限的最长子序列",
                                    "desc": "非暴力做法"
                              },
                              {
                                    "id": "3709",
                                    "title": "设计考试分数记录器",
                                    "score": "1648"
                              },
                              {
                                    "id": "1895",
                                    "title": "最大的幻方",
                                    "score": "1781"
                              },
                              {
                                    "id": "2055",
                                    "title": "蜡烛之间的盘子",
                                    "score": "1819"
                              },
                              {
                                    "id": "1744",
                                    "title": "你能在你最喜欢的那天吃到你最喜欢的糖果吗？",
                                    "score": "1859"
                              },
                              {
                                    "id": "1878",
                                    "title": "矩阵中最大的三个菱形和",
                                    "score": "1898",
                                    "desc": "斜向前缀和"
                              },
                              {
                                    "id": "1031",
                                    "title": "两个无重叠子数组的最大和",
                                    "desc": "做到 O(n)"
                              },
                              {
                                    "id": "2245",
                                    "title": "转角路径的乘积中最多能有几个尾随零",
                                    "score": "2037"
                              },
                              {
                                    "id": "1712",
                                    "title": "将数组分成三个子数组的方案数",
                                    "score": "2079"
                              },
                              {
                                    "id": "1862",
                                    "title": "向下取整数对和",
                                    "score": "2170"
                              },
                              {
                                    "id": "3748",
                                    "title": "统计稳定子数组的数目",
                                    "score": "2209",
                                    "desc": "包含进阶问题"
                              },
                              {
                                    "id": "2281",
                                    "title": "巫师的总力量和",
                                    "score": "2621"
                              },
                              {
                                    "id": "3445",
                                    "title": "奇偶频次间的最大差值",
                                    "desc": "II 2694"
                              },
                              {
                                    "id": "2983",
                                    "title": "回文串重新排列查询",
                                    "score": "2780"
                              },
                              {
                                    "id": "2955",
                                    "title": "同端子串的数量",
                                    "vip": true
                              },
                              {
                                    "id": "1788",
                                    "title": "最大化花园的美观度",
                                    "vip": true
                              },
                              {
                                    "id": "2819",
                                    "title": "购买巧克力后的最小相对损失",
                                    "vip": true
                              },
                              {
                                    "id": "2300",
                                    "title": "咒语和药水的成功对数"
                              },
                              {
                                    "id": "1534",
                                    "title": "统计好三元组"
                              }
                        ],
                        "desc": "思维扩展："
                  },
                  {
                        "title": "§1.6 二维前缀和",
                        "problems": [
                              {
                                    "id": "304",
                                    "title": "二维区域和检索",
                                    "desc": "- 矩阵不可变"
                              },
                              {
                                    "id": "1314",
                                    "title": "矩阵区域和",
                                    "score": "1484"
                              },
                              {
                                    "id": "3070",
                                    "title": "元素和小于等于",
                                    "desc": "k 的子矩阵的数目 1499"
                              },
                              {
                                    "id": "1738",
                                    "title": "找出第",
                                    "desc": "K 大的异或坐标值 1671"
                              },
                              {
                                    "id": "3212",
                                    "title": "统计",
                                    "desc": "X 和 Y 频数相等的子矩阵数量 1673"
                              },
                              {
                                    "id": "1292",
                                    "title": "元素和小于等于阈值的正方形的最大边长",
                                    "score": "1735"
                              },
                              {
                                    "id": "3148",
                                    "title": "矩阵中的最大得分",
                                    "score": "1820"
                              }
                        ],
                        "desc": "【图解】一张图秒懂二维前缀和！\n二维前缀最小值："
                  }
            ]
      },
      {
            "title": "二、差分",
            "children": [
                  {
                        "title": "§2.1 一维差分",
                        "problems": [],
                        "desc": "差分与前缀和的关系，类似导数与积分的关系。\n数组 a 的差分的前缀和就是数组 a（不变）。\n原理讲解"
                  },
                  {
                        "title": "§2.1.1 基础",
                        "problems": [
                              {
                                    "id": "2848",
                                    "title": "与车相交的点",
                                    "score": "1230"
                              },
                              {
                                    "id": "1893",
                                    "title": "检查是否区域内所有整数都被覆盖",
                                    "score": "1307"
                              },
                              {
                                    "id": "1854",
                                    "title": "人口最多的年份",
                                    "score": "1370"
                              },
                              {
                                    "id": "面试题 16.10",
                                    "title": "生存人数",
                                    "desc": "同 1854 题"
                              },
                              {
                                    "id": "2960",
                                    "title": "统计已测试设备",
                                    "desc": "差分思想"
                              },
                              {
                                    "id": "1094",
                                    "title": "拼车",
                                    "score": "1441"
                              },
                              {
                                    "id": "1109",
                                    "title": "航班预订统计",
                                    "score": "1570"
                              },
                              {
                                    "id": "3355",
                                    "title": "零数组变换",
                                    "desc": "I 1591"
                              },
                              {
                                    "id": "370",
                                    "title": "区间加法",
                                    "vip": true
                              }
                        ]
                  },
                  {
                        "title": "§2.1.2 进阶",
                        "problems": [
                              {
                                    "id": "3453",
                                    "title": "分割正方形",
                                    "desc": "I 1735"
                              },
                              {
                                    "id": "2381",
                                    "title": "字母移位",
                                    "desc": "II 1793"
                              },
                              {
                                    "id": "995",
                                    "title": "K",
                                    "desc": "连续位的最小翻转次数 1835"
                              },
                              {
                                    "id": "1589",
                                    "title": "所有排列中的最大和",
                                    "score": "1871"
                              },
                              {
                                    "id": "1526",
                                    "title": "形成目标数组的子数组最少增加次数",
                                    "score": "1872",
                                    "desc": "差分思想"
                              },
                              {
                                    "id": "3356",
                                    "title": "零数组变换",
                                    "desc": "II 1913 做法不止一种"
                              },
                              {
                                    "id": "1943",
                                    "title": "描述绘画结果",
                                    "score": "1969"
                              },
                              {
                                    "id": "3224",
                                    "title": "使差值相等的最少数组改动次数",
                                    "score": "1996",
                                    "desc": "做法不止一种"
                              },
                              {
                                    "id": "2327",
                                    "title": "知道秘密的人数",
                                    "desc": "做到 O(n)"
                              },
                              {
                                    "id": "2251",
                                    "title": "花期内花的数目",
                                    "score": "2022"
                              },
                              {
                                    "id": "2772",
                                    "title": "使数组中的所有元素都等于零",
                                    "score": "2029"
                              },
                              {
                                    "id": "3229",
                                    "title": "使数组等于目标数组所需的最少操作次数",
                                    "score": "2067",
                                    "desc": "差分思想"
                              },
                              {
                                    "id": "3529",
                                    "title": "统计水平子串和垂直子串重叠格子的数目",
                                    "score": "2105"
                              },
                              {
                                    "id": "798",
                                    "title": "得分最高的最小轮调",
                                    "score": "2130"
                              },
                              {
                                    "id": "3347",
                                    "title": "执行操作后元素的最高频率",
                                    "desc": "II 2156"
                              },
                              {
                                    "id": "2528",
                                    "title": "最大化城市的最小电量",
                                    "score": "2236"
                              },
                              {
                                    "id": "1674",
                                    "title": "使数组互补的最少操作次数",
                                    "score": "2333"
                              },
                              {
                                    "id": "3362",
                                    "title": "零数组变换",
                                    "desc": "III 2424"
                              },
                              {
                                    "id": "3655",
                                    "title": "区间乘法查询后的异或",
                                    "desc": "II 2454 商分"
                              },
                              {
                                    "id": "3017",
                                    "title": "按距离统计房屋对数目",
                                    "desc": "II 2709"
                              },
                              {
                                    "id": "2021",
                                    "title": "街上最亮的位置",
                                    "vip": true
                              },
                              {
                                    "id": "2015",
                                    "title": "每段建筑物的平均高度",
                                    "vip": true
                              },
                              {
                                    "id": "2237",
                                    "title": "计算街道上满足所需亮度的位置数量",
                                    "vip": true
                              },
                              {
                                    "id": "3009",
                                    "title": "折线图上的最大交点数量",
                                    "vip": true
                              },
                              {
                                    "id": "3279",
                                    "title": "活塞占据的最大总面积",
                                    "vip": true
                              },
                              {
                                    "id": "56",
                                    "title": "合并区间",
                                    "desc": "做法见 我的评论"
                              },
                              {
                                    "id": "57",
                                    "title": "插入区间"
                              },
                              {
                                    "id": "732",
                                    "title": "我的日程安排表",
                                    "desc": "III"
                              },
                              {
                                    "id": "2406",
                                    "title": "将区间分为最少组数",
                                    "score": "1713"
                              },
                              {
                                    "id": "253",
                                    "title": "会议室",
                                    "desc": "II（会员题）"
                              },
                              {
                                    "id": "759",
                                    "title": "员工空闲时间",
                                    "vip": true
                              }
                        ],
                        "desc": "思维扩展："
                  },
                  {
                        "title": "§2.2 二维差分",
                        "problems": [
                              {
                                    "id": "2536",
                                    "title": "子矩阵元素加",
                                    "desc": "1 1583"
                              },
                              {
                                    "id": "850",
                                    "title": "矩形面积",
                                    "desc": "II 2236 暴力做法"
                              },
                              {
                                    "id": "2132",
                                    "title": "用邮票贴满网格图",
                                    "score": "2364"
                              },
                              {
                                    "id": "LCP 74",
                                    "title": "最强祝福力场"
                              }
                        ],
                        "desc": "【图解】从一维差分到二维差分"
                  }
            ]
      },
      {
            "title": "三、栈",
            "children": [
                  {
                        "title": "§3.1 基础",
                        "problems": [
                              {
                                    "id": "1441",
                                    "title": "用栈操作构建数组",
                                    "score": "1180"
                              },
                              {
                                    "id": "844",
                                    "title": "比较含退格的字符串",
                                    "score": "1228"
                              },
                              {
                                    "id": "682",
                                    "title": "棒球比赛"
                              },
                              {
                                    "id": "2390",
                                    "title": "从字符串中移除星号",
                                    "score": "1348"
                              },
                              {
                                    "id": "1472",
                                    "title": "设计浏览器历史记录",
                                    "score": "1454"
                              },
                              {
                                    "id": "946",
                                    "title": "验证栈序列",
                                    "score": "1462"
                              },
                              {
                                    "id": "3412",
                                    "title": "计算字符串的镜像分数",
                                    "score": "1578"
                              },
                              {
                                    "id": "71",
                                    "title": "简化路径"
                              }
                        ]
                  },
                  {
                        "title": "§3.2 进阶",
                        "problems": [
                              {
                                    "id": "3170",
                                    "title": "删除星号以后字典序最小的字符串",
                                    "score": "1772"
                              },
                              {
                                    "id": "155",
                                    "title": "最小栈"
                              },
                              {
                                    "id": "1381",
                                    "title": "设计一个支持增量操作的栈"
                              },
                              {
                                    "id": "636",
                                    "title": "函数的独占时间"
                              },
                              {
                                    "id": "2434",
                                    "title": "使用机器人打印字典序最小的字符串",
                                    "score": "1953"
                              },
                              {
                                    "id": "895",
                                    "title": "最大频率栈",
                                    "score": "2028"
                              },
                              {
                                    "id": "1172",
                                    "title": "餐盘栈",
                                    "score": "2110"
                              },
                              {
                                    "id": "2589",
                                    "title": "完成所有任务的最少时间",
                                    "score": "2381",
                                    "desc": "做法不止一种"
                              },
                              {
                                    "id": "2524",
                                    "title": "子数组的最大频率分数",
                                    "vip": true
                              },
                              {
                                    "id": "716",
                                    "title": "最大栈",
                                    "vip": true
                              }
                        ]
                  },
                  {
                        "title": "§3.3 邻项消除",
                        "problems": [
                              {
                                    "id": "2696",
                                    "title": "删除子串后的字符串最小长度",
                                    "score": "1282"
                              },
                              {
                                    "id": "1047",
                                    "title": "删除字符串中的所有相邻重复项",
                                    "score": "1286"
                              },
                              {
                                    "id": "1544",
                                    "title": "整理字符串",
                                    "score": "1344"
                              },
                              {
                                    "id": "3561",
                                    "title": "移除相邻字符",
                                    "score": "1397"
                              },
                              {
                                    "id": "1003",
                                    "title": "检查替换后的词是否有效",
                                    "score": "1427"
                              },
                              {
                                    "id": "2216",
                                    "title": "美化数组的最少删除数",
                                    "score": "1510"
                              },
                              {
                                    "id": "1209",
                                    "title": "删除字符串中的所有相邻重复项",
                                    "desc": "II 1542"
                              },
                              {
                                    "id": "3703",
                                    "title": "移除K-平衡子字符串",
                                    "score": "1802",
                                    "desc": "联系 1209 题"
                              },
                              {
                                    "id": "1717",
                                    "title": "删除子字符串的最大得分",
                                    "score": "1868"
                              },
                              {
                                    "id": "2197",
                                    "title": "替换数组中的非互质数",
                                    "score": "2057"
                              },
                              {
                                    "id": "735",
                                    "title": "小行星碰撞"
                              },
                              {
                                    "id": "2751",
                                    "title": "机器人碰撞",
                                    "score": "2092",
                                    "desc": "联系 735 题"
                              }
                        ]
                  },
                  {
                        "title": "§3.4 合法括号字符串（RBS）",
                        "problems": [
                              {
                                    "id": "20",
                                    "title": "有效的括号"
                              },
                              {
                                    "id": "921",
                                    "title": "使括号有效的最少添加",
                                    "score": "1242"
                              },
                              {
                                    "id": "1021",
                                    "title": "删除最外层的括号",
                                    "score": "1311"
                              },
                              {
                                    "id": "1614",
                                    "title": "括号的最大嵌套深度",
                                    "score": "1323"
                              },
                              {
                                    "id": "1190",
                                    "title": "反转每对括号间的子串",
                                    "score": "1486"
                              },
                              {
                                    "id": "856",
                                    "title": "括号的分数",
                                    "score": "1563"
                              },
                              {
                                    "id": "1249",
                                    "title": "移除无效的括号",
                                    "score": "1657"
                              },
                              {
                                    "id": "1963",
                                    "title": "使字符串平衡的最小交换次数",
                                    "score": "1689"
                              },
                              {
                                    "id": "678",
                                    "title": "有效的括号字符串",
                                    "desc": "约 1700"
                              },
                              {
                                    "id": "1111",
                                    "title": "有效括号的嵌套深度",
                                    "score": "1749"
                              },
                              {
                                    "id": "1541",
                                    "title": "平衡括号字符串的最少插入次数",
                                    "score": "1759"
                              },
                              {
                                    "id": "2116",
                                    "title": "判断一个括号字符串是否有效",
                                    "score": "2038",
                                    "desc": "进阶问题：CF1709C"
                              },
                              {
                                    "id": "32",
                                    "title": "最长有效括号"
                              }
                        ],
                        "desc": "注：部分题目可以不用栈，而是用一个数字记录嵌套深度。"
                  },
                  {
                        "title": "§3.5 表达式解析",
                        "problems": [
                              {
                                    "id": "1006",
                                    "title": "笨阶乘",
                                    "score": "1408",
                                    "desc": "引入栈的思想"
                              },
                              {
                                    "id": "150",
                                    "title": "逆波兰表达式求值"
                              },
                              {
                                    "id": "394",
                                    "title": "字符串解码"
                              },
                              {
                                    "id": "8",
                                    "title": "字符串转换整数",
                                    "desc": "(atoi) 为下面的题目热身"
                              },
                              {
                                    "id": "224",
                                    "title": "基本计算器"
                              },
                              {
                                    "id": "227",
                                    "title": "基本计算器",
                                    "desc": "II"
                              },
                              {
                                    "id": "726",
                                    "title": "原子的数量"
                              },
                              {
                                    "id": "1106",
                                    "title": "解析布尔表达式",
                                    "score": "1880"
                              },
                              {
                                    "id": "591",
                                    "title": "标签验证器"
                              },
                              {
                                    "id": "736",
                                    "title": "Lisp",
                                    "desc": "语法解析"
                              },
                              {
                                    "id": "1096",
                                    "title": "花括号展开",
                                    "desc": "II 2349"
                              },
                              {
                                    "id": "1896",
                                    "title": "反转表达式值的最少操作次数",
                                    "score": "2532"
                              },
                              {
                                    "id": "65",
                                    "title": "有效数字"
                              },
                              {
                                    "id": "770",
                                    "title": "基本计算器",
                                    "desc": "IV 2863"
                              },
                              {
                                    "id": "439",
                                    "title": "三元表达式解析器",
                                    "vip": true
                              },
                              {
                                    "id": "3749",
                                    "title": "计算有效表达式",
                                    "vip": true
                              },
                              {
                                    "id": "772",
                                    "title": "基本计算器",
                                    "desc": "III（会员题）"
                              },
                              {
                                    "id": "1087",
                                    "title": "花括号展开",
                                    "vip": true
                              },
                              {
                                    "id": "1597",
                                    "title": "根据中缀表达式构造二叉表达式树",
                                    "vip": true
                              },
                              {
                                    "id": "1628",
                                    "title": "设计带解析函数的表达式树",
                                    "vip": true
                              }
                        ]
                  },
                  {
                        "title": "§3.6 对顶栈",
                        "problems": [
                              {
                                    "id": "2296",
                                    "title": "设计一个文本编辑器",
                                    "score": "1912",
                                    "desc": "也可以用 Splay 树"
                              }
                        ]
                  },
                  {
                        "title": "§3.7 单调栈",
                        "problems": [],
                        "desc": "见 单调栈题单。"
                  }
            ]
      },
      {
            "title": "四、队列",
            "children": [
                  {
                        "title": "§4.1 基础",
                        "problems": [
                              {
                                    "id": "933",
                                    "title": "最近的请求次数",
                                    "score": "1338"
                              },
                              {
                                    "id": "950",
                                    "title": "按递增顺序显示卡牌",
                                    "score": "1686"
                              },
                              {
                                    "id": "649",
                                    "title": "Dota2",
                                    "desc": "参议院"
                              },
                              {
                                    "id": "346",
                                    "title": "数据流中的移动平均值",
                                    "vip": true
                              },
                              {
                                    "id": "362",
                                    "title": "敲击计数器",
                                    "vip": true
                              },
                              {
                                    "id": "379",
                                    "title": "电话目录管理系统",
                                    "vip": true
                              },
                              {
                                    "id": "1429",
                                    "title": "第一个唯一数字",
                                    "vip": true
                              },
                              {
                                    "id": "2534",
                                    "title": "通过门的时间",
                                    "vip": true
                              }
                        ]
                  },
                  {
                        "title": "§4.2 设计",
                        "problems": [
                              {
                                    "id": "1670",
                                    "title": "设计前中后队列",
                                    "score": "1610"
                              },
                              {
                                    "id": "3508",
                                    "title": "设计路由器",
                                    "score": "1851"
                              },
                              {
                                    "id": "225",
                                    "title": "用队列实现栈"
                              },
                              {
                                    "id": "232",
                                    "title": "用栈实现队列"
                              },
                              {
                                    "id": "622",
                                    "title": "设计循环队列"
                              },
                              {
                                    "id": "641",
                                    "title": "设计循环双端队列"
                              }
                        ]
                  },
                  {
                        "title": "§4.3 双端队列",
                        "problems": [
                              {
                                    "id": "2810",
                                    "title": "故障键盘",
                                    "desc": "做到 O(n)"
                              },
                              {
                                    "id": "2071",
                                    "title": "你可以安排的最多任务数目",
                                    "score": "2648"
                              }
                        ]
                  },
                  {
                        "title": "§4.4 单调队列",
                        "problems": [
                              {
                                    "id": "239",
                                    "title": "滑动窗口最大值"
                              },
                              {
                                    "id": "LCR 184",
                                    "title": "设计自助结算系统"
                              },
                              {
                                    "id": "1438",
                                    "title": "绝对差不超过限制的最长连续子数组",
                                    "score": "1672"
                              },
                              {
                                    "id": "2762",
                                    "title": "不间断子数组",
                                    "desc": "同 1438 题"
                              },
                              {
                                    "id": "2398",
                                    "title": "预算内的最多机器人数目",
                                    "score": "1917"
                              },
                              {
                                    "id": "3589",
                                    "title": "计数质数间隔平衡子数组",
                                    "score": "2235"
                              },
                              {
                                    "id": "862",
                                    "title": "和至少为",
                                    "desc": "K 的最短子数组 2307"
                              },
                              {
                                    "id": "1499",
                                    "title": "满足不等式的最大值",
                                    "score": "2456"
                              }
                        ],
                        "desc": "个人觉得叫单调双端队列更准确。\n单调队列 = 滑动窗口 + 单调栈。必须先掌握滑动窗口和单调栈这两个知识点，再学单调队列。\n问：入队、出队、更新答案，这三步的顺序如何思考？\n答：有两种情况。如果更新答案时，用到的数据包含当前元素，那么就需要先入队，再更新答案；如果用到的数据不包含当前元素，那么就需要先更新答案，再入队。至于出队，一般写在前面，每遍历到一个新的元素，就看看队首元素是否失效（不满足要求），失效则弹出队首。\n原理讲解\n模板：\nPython3\nJava\nC++\nGo\n# 计算 nums 的每个长为 k 的窗口的最大值\n# 时间复杂度 O(n)，其中 n 是 nums 的长度\ndef maxSlidingWindow(nums: List[int], k: int) -> List[int]:\nans = [0] * (len(nums) - k + 1)  # 窗口个数\nq = deque()  # 双端队列\nfor i, x in enumerate(nums):\n# 1. 右边入\nwhile q and nums[q[-1]] <= x:\nq.pop()  # 维护 q 的单调性\nq.append(i)  # 注意保存的是下标，这样下面可以判断队首是否离开窗口\n# 2. 左边出\nleft = i - k + 1  # 窗口左端点\nif q[0] < left:  # 队首离开窗口\nq.popleft()\n# 3. 在窗口左端点处记录答案\nif left >= 0:\n# 由于队首到队尾单调递减，所以窗口最大值就在队首\nans[left] = nums[q[0]]\nreturn ans\n关于单调队列优化 DP，见 动态规划题单 中的「§11.3 单调队列优化 DP」。"
                  }
            ]
      },
      {
            "title": "五、堆（优先队列）",
            "children": [
                  {
                        "title": "§5.1 基础",
                        "problems": [
                              {
                                    "id": "1046",
                                    "title": "最后一块石头的重量",
                                    "score": "1173"
                              },
                              {
                                    "id": "3264",
                                    "title": "K",
                                    "desc": "次乘运算后的最终数组 I 1178"
                              },
                              {
                                    "id": "2558",
                                    "title": "从数量最多的堆取走礼物",
                                    "score": "1277"
                              },
                              {
                                    "id": "2336",
                                    "title": "无限集中的最小数字",
                                    "score": "1375"
                              },
                              {
                                    "id": "2530",
                                    "title": "执行",
                                    "desc": "K 次操作后的最大分数 1386"
                              },
                              {
                                    "id": "3066",
                                    "title": "超过阈值的最少操作数",
                                    "desc": "II 1400"
                              },
                              {
                                    "id": "1962",
                                    "title": "移除石子使总数最小",
                                    "score": "1419"
                              },
                              {
                                    "id": "703",
                                    "title": "数据流中的第",
                                    "desc": "K 大元素 经典题"
                              },
                              {
                                    "id": "3275",
                                    "title": "第",
                                    "desc": "K 近障碍物查询 1420"
                              },
                              {
                                    "id": "1845",
                                    "title": "座位预约管理系统",
                                    "score": "1429",
                                    "desc": "你能做到复杂度与 n 无关吗？"
                              },
                              {
                                    "id": "2208",
                                    "title": "将数组和减半的最少操作次数",
                                    "score": "1550"
                              },
                              {
                                    "id": "2233",
                                    "title": "K",
                                    "desc": "次增加后的最大乘积 1686"
                              },
                              {
                                    "id": "3296",
                                    "title": "移山所需的最少秒数",
                                    "score": "1695"
                              },
                              {
                                    "id": "1942",
                                    "title": "最小未被占据椅子的编号",
                                    "score": "1695"
                              },
                              {
                                    "id": "1801",
                                    "title": "积压订单中的订单总数",
                                    "score": "1711"
                              },
                              {
                                    "id": "2406",
                                    "title": "将区间分为最少组数",
                                    "score": "1713"
                              },
                              {
                                    "id": "3478",
                                    "title": "选出和最大的",
                                    "desc": "K 个元素 1753"
                              },
                              {
                                    "id": "2462",
                                    "title": "雇佣",
                                    "desc": "K 位工人的总代价 1764"
                              },
                              {
                                    "id": "1834",
                                    "title": "单线程",
                                    "desc": "CPU 1798"
                              },
                              {
                                    "id": "1792",
                                    "title": "最大平均通过率",
                                    "score": "1818"
                              },
                              {
                                    "id": "1167",
                                    "title": "连接木棍的最低费用",
                                    "vip": true
                              },
                              {
                                    "id": "253",
                                    "title": "会议室",
                                    "desc": "II（会员题）经典题"
                              }
                        ],
                        "desc": "为什么堆化的时间复杂度是 O(n)？"
                  },
                  {
                        "title": "§5.2 进阶",
                        "problems": [
                              {
                                    "id": "23",
                                    "title": "合并",
                                    "desc": "K 个升序链表"
                              },
                              {
                                    "id": "2931",
                                    "title": "购买物品的最大开销",
                                    "score": "1822"
                              },
                              {
                                    "id": "355",
                                    "title": "设计推特"
                              },
                              {
                                    "id": "502",
                                    "title": "IPO"
                              },
                              {
                                    "id": "1705",
                                    "title": "吃苹果的最大数目",
                                    "score": "1930"
                              },
                              {
                                    "id": "778",
                                    "title": "水位上升的泳池中游泳"
                              },
                              {
                                    "id": "1631",
                                    "title": "最小体力消耗路径",
                                    "score": "1948"
                              },
                              {
                                    "id": "1882",
                                    "title": "使用服务器处理任务",
                                    "score": "1979"
                              },
                              {
                                    "id": "1354",
                                    "title": "多次求和构造目标数组",
                                    "score": "2015"
                              },
                              {
                                    "id": "1353",
                                    "title": "最多可以参加的会议数目",
                                    "score": "2016"
                              },
                              {
                                    "id": "1235",
                                    "title": "规划兼职工作",
                                    "score": "2023",
                                    "desc": "做法不止一种"
                              },
                              {
                                    "id": "632",
                                    "title": "最小区间",
                                    "desc": "做法不止一种"
                              },
                              {
                                    "id": "2542",
                                    "title": "最大子序列的分数",
                                    "score": "2056"
                              },
                              {
                                    "id": "1383",
                                    "title": "最大的团队表现值",
                                    "score": "2091"
                              },
                              {
                                    "id": "2402",
                                    "title": "会议室",
                                    "desc": "III 2093"
                              },
                              {
                                    "id": "2503",
                                    "title": "矩阵查询可获得的最大分数",
                                    "score": "2196"
                              },
                              {
                                    "id": "2163",
                                    "title": "删除元素后和的最小差值",
                                    "score": "2225"
                              },
                              {
                                    "id": "857",
                                    "title": "雇佣",
                                    "desc": "K 名工人的最低成本 2260"
                              },
                              {
                                    "id": "1606",
                                    "title": "找到处理最多请求的服务器",
                                    "score": "2276"
                              },
                              {
                                    "id": "1851",
                                    "title": "包含每个查询的最小区间",
                                    "score": "2286"
                              },
                              {
                                    "id": "407",
                                    "title": "接雨水",
                                    "desc": "II"
                              },
                              {
                                    "id": "2940",
                                    "title": "找到",
                                    "desc": "Alice 和 Bob 可以相遇的建筑 2327"
                              },
                              {
                                    "id": "3399",
                                    "title": "字符相同的最短子字符串",
                                    "desc": "II 2376"
                              },
                              {
                                    "id": "2589",
                                    "title": "完成所有任务的最少时间",
                                    "score": "2381",
                                    "desc": "做法不止一种"
                              },
                              {
                                    "id": "3266",
                                    "title": "K",
                                    "desc": "次乘运算后的最终数组 II 2509"
                              },
                              {
                                    "id": "1675",
                                    "title": "数组的最小偏移量",
                                    "score": "2533"
                              },
                              {
                                    "id": "2617",
                                    "title": "网格图中最少访问的格子数",
                                    "score": "2582"
                              },
                              {
                                    "id": "2532",
                                    "title": "过桥的时间",
                                    "score": "2589"
                              },
                              {
                                    "id": "LCP 33",
                                    "title": "蓄水",
                                    "desc": "思考：更快的做法"
                              },
                              {
                                    "id": "1500",
                                    "title": "设计文件分享系统",
                                    "vip": true
                              },
                              {
                                    "id": "1199",
                                    "title": "建造街区的最短时间",
                                    "vip": true
                              },
                              {
                                    "id": "3506",
                                    "title": "查找消除细菌菌株所需时间",
                                    "vip": true
                              },
                              {
                                    "id": "1348",
                                    "title": "推文计数",
                                    "score": "2037"
                              },
                              {
                                    "id": "855",
                                    "title": "考场就座",
                                    "score": "2067"
                              },
                              {
                                    "id": "1912",
                                    "title": "设计电影租借系统",
                                    "score": "2182"
                              }
                        ],
                        "desc": "有序集合："
                  },
                  {
                        "title": "§5.3 第 K 小/大",
                        "problems": [
                              {
                                    "id": "264",
                                    "title": "丑数",
                                    "desc": "II"
                              },
                              {
                                    "id": "378",
                                    "title": "有序矩阵中第",
                                    "desc": "K 小的元素"
                              },
                              {
                                    "id": "23",
                                    "title": "合并",
                                    "desc": "K 个升序链表"
                              },
                              {
                                    "id": "373",
                                    "title": "查找和最小的",
                                    "desc": "K 对数字"
                              },
                              {
                                    "id": "1439",
                                    "title": "有序矩阵中的第",
                                    "desc": "k 个最小数组和 2134"
                              },
                              {
                                    "id": "786",
                                    "title": "第",
                                    "desc": "K 个最小的质数分数 2169"
                              },
                              {
                                    "id": "3691",
                                    "title": "最大子数组总值",
                                    "desc": "II 2469"
                              },
                              {
                                    "id": "2386",
                                    "title": "找出数组的第",
                                    "desc": "K 大和 2648"
                              }
                        ],
                        "desc": "部分题目也可以用二分解决。"
                  },
                  {
                        "title": "§5.4 重排元素",
                        "problems": [
                              {
                                    "id": "984",
                                    "title": "不含",
                                    "desc": "AAA 或 BBB 的字符串 1474 不需要堆，这题的目的是引入贪心思想"
                              },
                              {
                                    "id": "767",
                                    "title": "重构字符串",
                                    "score": "1681"
                              },
                              {
                                    "id": "1054",
                                    "title": "距离相等的条形码",
                                    "score": "1702"
                              },
                              {
                                    "id": "1405",
                                    "title": "最长快乐字符串",
                                    "score": "1821"
                              },
                              {
                                    "id": "3081",
                                    "title": "替换字符串中的问号使分数最小",
                                    "score": "1905"
                              },
                              {
                                    "id": "621",
                                    "title": "任务调度器"
                              },
                              {
                                    "id": "358",
                                    "title": "K",
                                    "desc": "距离间隔重排字符串（会员题）"
                              }
                        ]
                  },
                  {
                        "title": "§5.5 反悔堆",
                        "problems": [
                              {
                                    "id": "LCP 30",
                                    "title": "魔塔游戏"
                              },
                              {
                                    "id": "1642",
                                    "title": "可以到达的最远建筑",
                                    "score": "1962"
                              },
                              {
                                    "id": "630",
                                    "title": "课程表",
                                    "desc": "III"
                              },
                              {
                                    "id": "871",
                                    "title": "最低加油次数",
                                    "score": "2074"
                              },
                              {
                                    "id": "3362",
                                    "title": "零数组变换",
                                    "desc": "III 2424 虽然没有反悔的过程，但思路和 871 是类似的"
                              },
                              {
                                    "id": "2813",
                                    "title": "子序列最大优雅度",
                                    "score": "2582",
                                    "desc": "也可以不用堆"
                              },
                              {
                                    "id": "3049",
                                    "title": "标记所有下标的最早秒数",
                                    "desc": "II 3111"
                              },
                              {
                                    "id": "3711",
                                    "title": "不出现负余额的最大交易额",
                                    "vip": true
                              },
                              {
                                    "id": "2599",
                                    "title": "使前缀和数组非负",
                                    "vip": true
                              }
                        ],
                        "desc": "基于堆的反悔贪心。"
                  },
                  {
                        "title": "§5.6 懒删除堆",
                        "problems": [
                              {
                                    "id": "2349",
                                    "title": "设计数字容器系统",
                                    "score": "1540"
                              },
                              {
                                    "id": "3607",
                                    "title": "电网维护",
                                    "score": "1700"
                              },
                              {
                                    "id": "2353",
                                    "title": "设计食物评分系统",
                                    "score": "1782"
                              },
                              {
                                    "id": "3092",
                                    "title": "最高频率的",
                                    "desc": "ID 1793"
                              },
                              {
                                    "id": "3408",
                                    "title": "设计任务管理器",
                                    "score": "1807"
                              },
                              {
                                    "id": "2034",
                                    "title": "股票价格波动",
                                    "score": "1832"
                              },
                              {
                                    "id": "1172",
                                    "title": "餐盘栈",
                                    "score": "2110"
                              },
                              {
                                    "id": "218",
                                    "title": "天际线问题",
                                    "desc": "扫描线"
                              },
                              {
                                    "id": "3510",
                                    "title": "移除最小数对使数组有序",
                                    "desc": "II 2608"
                              },
                              {
                                    "id": "3672",
                                    "title": "子数组中加权众数的总和",
                                    "vip": true
                              },
                              {
                                    "id": "3391",
                                    "title": "设计一个高效的层跟踪三维二进制矩阵",
                                    "vip": true
                              },
                              {
                                    "id": "716",
                                    "title": "最大栈",
                                    "vip": true
                              }
                        ],
                        "desc": "支持删除堆中任意元素。\n模板：\nPython3\nJava\nC++\nGo\n# 模板来源 https://leetcode.cn/circle/discuss/mOr1u6/\nclass LazyHeap:\ndef __init__(self):\nself.heap = []  # 最小堆（最大堆可以把数字取反或重载 __lt__）\nself.remove_cnt = defaultdict(int)  # 每个元素剩余需要删除的次数\nself.size = 0  # 堆的实际大小\n# 删除\ndef remove(self, x: Any) -> None:\nself.remove_cnt[x] += 1  # 懒删除\nself.size -= 1\n# 正式执行删除操作\ndef _apply_remove(self) -> None:\nwhile self.heap and self.remove_cnt[self.heap[0]] > 0:\nself.remove_cnt[self.heap[0]] -= 1\nheappop(self.heap)\n# 查看堆顶\ndef top(self) -> Any:\nself._apply_remove()\nreturn self.heap[0]  # 真正的堆顶\n# 出堆\ndef pop(self) -> Any:\nself._apply_remove()\nself.size -= 1\nreturn heappop(self.heap)\n# 入堆\ndef push(self, x: Any) -> None:\nif self.remove_cnt[x] > 0:\nself.remove_cnt[x] -= 1  # 抵消之前的删除\nelse:\nheappush(self.heap, x)\nself.size += 1"
                  },
                  {
                        "title": "§5.7 对顶堆（滑动窗口第 K 小/大）",
                        "problems": [
                              {
                                    "id": "2102",
                                    "title": "序列顺序查询",
                                    "score": "2159"
                              },
                              {
                                    "id": "295",
                                    "title": "数据流的中位数"
                              },
                              {
                                    "id": "480",
                                    "title": "滑动窗口中位数"
                              },
                              {
                                    "id": "1825",
                                    "title": "求出",
                                    "desc": "MK 平均值 2396"
                              },
                              {
                                    "id": "3505",
                                    "title": "使",
                                    "desc": "K 个子数组内元素相等的最少操作数 2539 滑动窗口中位数的距离和"
                              },
                              {
                                    "id": "3013",
                                    "title": "将数组分成最小总代价的子数组",
                                    "desc": "II 2540"
                              },
                              {
                                    "id": "3321",
                                    "title": "计算子数组的",
                                    "desc": "x-sum II 2598"
                              },
                              {
                                    "id": "LCP 24",
                                    "title": "数字游戏"
                              },
                              {
                                    "id": "3369",
                                    "title": "设计数组统计跟踪器",
                                    "vip": true
                              },
                              {
                                    "id": "3422",
                                    "title": "将子数组元素变为相等所需的最小操作数",
                                    "vip": true
                              }
                        ],
                        "desc": "讲解\n部分题目需要结合懒删除堆。\n另见 图论题单 中的 Dijkstra 算法。"
                  }
            ]
      },
      {
            "title": "六、字典树（trie）",
            "children": [
                  {
                        "title": "§6.1 基础",
                        "problems": [
                              {
                                    "id": "208",
                                    "title": "实现",
                                    "desc": "Trie (前缀树)"
                              },
                              {
                                    "id": "3597",
                                    "title": "分割字符串",
                                    "desc": "非暴力做法"
                              },
                              {
                                    "id": "648",
                                    "title": "单词替换"
                              },
                              {
                                    "id": "720",
                                    "title": "词典中最长的单词"
                              },
                              {
                                    "id": "2416",
                                    "title": "字符串的前缀分数和",
                                    "score": "1725"
                              },
                              {
                                    "id": "677",
                                    "title": "键值映射"
                              },
                              {
                                    "id": "1268",
                                    "title": "搜索推荐系统"
                              },
                              {
                                    "id": "1233",
                                    "title": "删除子文件夹"
                              },
                              {
                                    "id": "820",
                                    "title": "单词的压缩编码"
                              },
                              {
                                    "id": "2261",
                                    "title": "含最多",
                                    "desc": "K 个可整除元素的子数组 做到 O(n"
                              },
                              {
                                    "id": "1804",
                                    "title": "实现",
                                    "desc": "Trie （前缀树） II（会员题）"
                              },
                              {
                                    "id": "2168",
                                    "title": "每个数字的频率都相同的独特子字符串的数量同",
                                    "score": "2261",
                                    "desc": "题",
                                    "vip": true
                              }
                        ],
                        "desc": "模板\n2\n)"
                  },
                  {
                        "title": "§6.2 进阶",
                        "problems": [
                              {
                                    "id": "211",
                                    "title": "添加与搜索单词",
                                    "desc": "- 数据结构设计"
                              },
                              {
                                    "id": "676",
                                    "title": "实现一个魔法字典"
                              },
                              {
                                    "id": "212",
                                    "title": "单词搜索",
                                    "desc": "II"
                              },
                              {
                                    "id": "3093",
                                    "title": "最长公共后缀查询",
                                    "score": "2118"
                              },
                              {
                                    "id": "745",
                                    "title": "前缀和后缀搜索"
                              },
                              {
                                    "id": "3045",
                                    "title": "统计前后缀下标对",
                                    "desc": "II 2328"
                              },
                              {
                                    "id": "336",
                                    "title": "回文对"
                              },
                              {
                                    "id": "1948",
                                    "title": "删除系统中的重复文件夹",
                                    "score": "2534"
                              },
                              {
                                    "id": "425",
                                    "title": "单词方块",
                                    "vip": true
                              },
                              {
                                    "id": "527",
                                    "title": "单词缩写",
                                    "vip": true
                              },
                              {
                                    "id": "588",
                                    "title": "设计内存文件系统",
                                    "vip": true
                              },
                              {
                                    "id": "616",
                                    "title": "给字符串添加加粗标签",
                                    "vip": true
                              },
                              {
                                    "id": "758",
                                    "title": "字符串中的加粗单词",
                                    "vip": true
                              },
                              {
                                    "id": "642",
                                    "title": "设计搜索自动补全系统",
                                    "vip": true
                              },
                              {
                                    "id": "1065",
                                    "title": "字符串的索引对",
                                    "vip": true
                              },
                              {
                                    "id": "1166",
                                    "title": "设计文件系统",
                                    "vip": true
                              },
                              {
                                    "id": "1858",
                                    "title": "包含所有前缀的最长单词",
                                    "vip": true
                              },
                              {
                                    "id": "440",
                                    "title": "字典序的第K小数字"
                              }
                        ],
                        "desc": "思维扩展："
                  },
                  {
                        "title": "§6.3 字典树优化 DP",
                        "problems": [
                              {
                                    "id": "139",
                                    "title": "单词拆分"
                              },
                              {
                                    "id": "140",
                                    "title": "单词拆分",
                                    "desc": "II"
                              },
                              {
                                    "id": "面试题 17.13",
                                    "title": "恢复空格"
                              },
                              {
                                    "id": "472",
                                    "title": "连接词",
                                    "desc": "约 2300"
                              },
                              {
                                    "id": "2977",
                                    "title": "转换字符串的最小成本",
                                    "desc": "II 2696"
                              }
                        ]
                  },
                  {
                        "title": "§6.4 0-1 字典树（异或字典树）",
                        "problems": [
                              {
                                    "id": "421",
                                    "title": "数组中两个数的最大异或值",
                                    "desc": "约 2000"
                              },
                              {
                                    "id": "2935",
                                    "title": "找出强数对的最大异或值",
                                    "desc": "II 2349"
                              },
                              {
                                    "id": "1707",
                                    "title": "与数组中元素的最大异或值",
                                    "score": "2359"
                              },
                              {
                                    "id": "1803",
                                    "title": "统计异或值在范围内的数对有多少",
                                    "score": "2479"
                              },
                              {
                                    "id": "1938",
                                    "title": "查询最大基因差",
                                    "score": "2503"
                              },
                              {
                                    "id": "3632",
                                    "title": "异或至少为",
                                    "desc": "K 的子数组数目（会员题）"
                              },
                              {
                                    "id": "2479",
                                    "title": "两个不重叠子树的最大异或值",
                                    "vip": true
                              }
                        ],
                        "desc": "部分题目也可以用试填法解决。"
                  }
            ]
      },
      {
            "title": "七、并查集",
            "children": [
                  {
                        "title": "§7.1 基础",
                        "problems": [
                              {
                                    "id": "684",
                                    "title": "冗余连接",
                                    "desc": "做法不止一种"
                              },
                              {
                                    "id": "3493",
                                    "title": "属性图",
                                    "score": "1565"
                              },
                              {
                                    "id": "990",
                                    "title": "等式方程的可满足性",
                                    "score": "1638"
                              },
                              {
                                    "id": "721",
                                    "title": "账户合并"
                              },
                              {
                                    "id": "3532",
                                    "title": "针对图的路径存在性查询",
                                    "desc": "I 有更简单的做法"
                              },
                              {
                                    "id": "737",
                                    "title": "句子相似性",
                                    "desc": "II（会员题）"
                              },
                              {
                                    "id": "1101",
                                    "title": "彼此熟识的最早时间",
                                    "vip": true
                              },
                              {
                                    "id": "1258",
                                    "title": "近义词句子",
                                    "vip": true
                              }
                        ],
                        "desc": "更多基础题，见 网格图题单 中的 DFS 和 图论题单 中的 DFS，其中大部分题目也可以用并查集实现。"
                  },
                  {
                        "title": "§7.2 进阶",
                        "problems": [
                              {
                                    "id": "3551",
                                    "title": "数位和排序需要的最小交换次数",
                                    "score": "1507",
                                    "desc": "做法不止一种"
                              },
                              {
                                    "id": "2471",
                                    "title": "逐层排序二叉树所需的最少操作数目",
                                    "score": "1635",
                                    "desc": "做法不止一种"
                              },
                              {
                                    "id": "1202",
                                    "title": "交换字符串中的元素",
                                    "score": "1855"
                              },
                              {
                                    "id": "1061",
                                    "title": "按字典序排列最小的等效字符串"
                              },
                              {
                                    "id": "1722",
                                    "title": "执行交换操作后的最小汉明距离",
                                    "score": "1892"
                              },
                              {
                                    "id": "3608",
                                    "title": "包含",
                                    "desc": "K 个连通分量需要的最小时间 1893"
                              },
                              {
                                    "id": "3613",
                                    "title": "最小化连通分量的最大成本",
                                    "desc": "类似 3608 题"
                              },
                              {
                                    "id": "778",
                                    "title": "水位上升的泳池中游泳"
                              },
                              {
                                    "id": "3695",
                                    "title": "交换元素后的最大交替和",
                                    "score": "1984"
                              },
                              {
                                    "id": "765",
                                    "title": "情侣牵手",
                                    "score": "1999"
                              },
                              {
                                    "id": "685",
                                    "title": "冗余连接",
                                    "desc": "II"
                              },
                              {
                                    "id": "947",
                                    "title": "移除最多的同行或同列石头",
                                    "score": "2035"
                              },
                              {
                                    "id": "839",
                                    "title": "相似字符串组",
                                    "score": "2054"
                              },
                              {
                                    "id": "1970",
                                    "title": "你能穿过矩阵的最后一天",
                                    "score": "2124"
                              },
                              {
                                    "id": "2076",
                                    "title": "处理含限制条件的好友请求",
                                    "score": "2131"
                              },
                              {
                                    "id": "1579",
                                    "title": "保证图可完全遍历",
                                    "score": "2132"
                              },
                              {
                                    "id": "959",
                                    "title": "由斜杠划分区域",
                                    "score": "2136"
                              },
                              {
                                    "id": "2812",
                                    "title": "找出最安全路径",
                                    "score": "2154"
                              },
                              {
                                    "id": "2503",
                                    "title": "矩阵查询可获得的最大分数",
                                    "score": "2196"
                              },
                              {
                                    "id": "3600",
                                    "title": "升级后最大生成树稳定性",
                                    "score": "2301",
                                    "desc": "做法不止一种"
                              },
                              {
                                    "id": "2867",
                                    "title": "统计树中的合法路径数目",
                                    "score": "2428"
                              },
                              {
                                    "id": "2421",
                                    "title": "好路径的数目",
                                    "score": "2445"
                              },
                              {
                                    "id": "2157",
                                    "title": "字符串分组",
                                    "score": "2499"
                              },
                              {
                                    "id": "1632",
                                    "title": "矩阵转换后的秩",
                                    "score": "2530"
                              },
                              {
                                    "id": "803",
                                    "title": "打砖块",
                                    "score": "2765"
                              },
                              {
                                    "id": "3235",
                                    "title": "判断矩形的两个角落是否可达"
                              },
                              {
                                    "id": "LCP 71",
                                    "title": "集水器"
                              },
                              {
                                    "id": "2371",
                                    "title": "最小化网格中的最大值",
                                    "vip": true
                              },
                              {
                                    "id": "2459",
                                    "title": "通过移动项目到空白区域来排序数组置换",
                                    "vip": true
                              }
                        ],
                        "desc": "另见 图论题单 中的最小生成树。"
                  },
                  {
                        "title": "§7.3 GCD 并查集",
                        "problems": [
                              {
                                    "id": "2709",
                                    "title": "最大公约数遍历",
                                    "score": "2172"
                              },
                              {
                                    "id": "1627",
                                    "title": "带阈值的图连通性",
                                    "score": "2221"
                              },
                              {
                                    "id": "952",
                                    "title": "按公因数计算最大组件大小",
                                    "score": "2272"
                              },
                              {
                                    "id": "1998",
                                    "title": "数组的最大公因数排序",
                                    "score": "2429"
                              },
                              {
                                    "id": "3378",
                                    "title": "统计最小公倍数图中的连通块数目",
                                    "score": "2532",
                                    "desc": "思路类似 1627 题"
                              }
                        ]
                  },
                  {
                        "title": "§7.4 数组上的并查集",
                        "problems": [
                              {
                                    "id": "1562",
                                    "title": "查找大小为",
                                    "desc": "M 的最新分组 1928"
                              },
                              {
                                    "id": "1488",
                                    "title": "避免洪水泛滥",
                                    "score": "1974"
                              },
                              {
                                    "id": "1353",
                                    "title": "最多可以参加的会议数目",
                                    "score": "2016"
                              },
                              {
                                    "id": "2382",
                                    "title": "删除操作后的最大子段和",
                                    "score": "2136"
                              },
                              {
                                    "id": "2334",
                                    "title": "元素值大于变化阈值的子数组",
                                    "score": "2381"
                              },
                              {
                                    "id": "3666",
                                    "title": "使二进制字符串全为",
                                    "desc": "1 的最少操作次数 2477"
                              },
                              {
                                    "id": "2612",
                                    "title": "最少翻转操作数",
                                    "score": "2824"
                              }
                        ]
                  },
                  {
                        "title": "§7.5 区间并查集",
                        "problems": [
                              {
                                    "id": "3244",
                                    "title": "新增道路查询后的最短距离",
                                    "desc": "II 2270"
                              },
                              {
                                    "id": "1851",
                                    "title": "包含每个查询的最小区间",
                                    "score": "2286"
                              },
                              {
                                    "id": "LCP 52",
                                    "title": "二叉搜索树染色"
                              },
                              {
                                    "id": "2158",
                                    "title": "每天绘制新区域的数量",
                                    "vip": true
                              }
                        ]
                  },
                  {
                        "title": "§7.6 带权并查集（边权并查集）",
                        "problems": [
                              {
                                    "id": "399",
                                    "title": "除法求值",
                                    "desc": "模板题"
                              },
                              {
                                    "id": "3710",
                                    "title": "最大划分因子",
                                    "score": "2135"
                              },
                              {
                                    "id": "2307",
                                    "title": "检查方程中的矛盾之处",
                                    "vip": true
                              }
                        ],
                        "desc": "模板：\nPython3\nJava\nC++\nGo\n# 模板来源 https://leetcode.cn/circle/discuss/mOr1u6/\nclass UnionFind:\ndef __init__(self, n: int):\n# 一开始有 n 个集合 {0}, {1}, ..., {n-1}\n# 集合 i 的代表元是自己，自己到自己的距离是 0\nself.fa = list(range(n))  # 代表元\nself.dis = [0] * n  # dis[x] 表示 x 到（x 所在集合的）代表元的距离\n# 返回 x 所在集合的代表元\n# 同时做路径压缩\ndef find(self, x: int) -> int:\nfa = self.fa\nif fa[x] != x:\nroot = self.find(fa[x])\nself.dis[x] += self.dis[fa[x]]  # 递归更新 x 到其代表元的距离\nfa[x] = root\nreturn fa[x]\n# 判断 x 和 y 是否在同一个集合（同普通并查集）\ndef same(self, x: int, y: int) -> bool:\nreturn self.find(x) == self.find(y)\n# 计算从 from 到 to 的相对距离\n# 调用时需保证 from 和 to 在同一个集合中，否则返回值无意义\ndef get_relative_distance(self, from_: int, to: int) -> int:\nself.find(from_)\nself.find(to)\n# to-from = (x-from) - (x-to) = dis[from] - dis[to]\nreturn self.dis[from_] - self.dis[to]\n# 合并 from 和 to，新增信息 to - from = value\n# 其中 to 和 from 表示未知量，下文的 x 和 y 也表示未知量\n# 如果 from 和 to 不在同一个集合，返回 True，否则返回是否与已知信息矛盾\ndef merge(self, from_: int, to: int, value: int) -> bool:\nx, y = self.find(from_), self.find(to)\ndis = self.dis\nif x == y:  # from 和 to 在同一个集合，不做合并\n# to-from = (x-from) - (x-to) = dis[from] - dis[to] = value\nreturn dis[from_] - dis[to] == value\n#    x --------- y\n#   /           /\n# from ------- to\n# 已知 x-from = dis[from] 和 y-to = dis[to]，现在合并 from 和 to，新增信息 to-from = value\n# 由于 y-from = (y-x) + (x-from) = (y-to) + (to-from)\n# 所以 y-x = (to-from) + (y-to) - (x-from) = value + dis[to] - dis[from]\ndis[x] = value + dis[to] - dis[from_]  # 计算 x 到其代表元 y 的距离\nself.fa[x] = y\nreturn True\n附加模板题：CF1850H"
                  }
            ]
      },
      {
            "title": "八、树状数组和线段树",
            "children": [
                  {
                        "title": "§8.1 树状数组",
                        "problems": [
                              {
                                    "id": "307",
                                    "title": "区域和检索",
                                    "desc": "- 数组可修改"
                              },
                              {
                                    "id": "3072",
                                    "title": "将元素分配到两个数组中",
                                    "desc": "II 2053 离散化"
                              },
                              {
                                    "id": "3624",
                                    "title": "位计数深度为",
                                    "desc": "K 的整数数目 II 2086"
                              },
                              {
                                    "id": "3187",
                                    "title": "数组中的峰值",
                                    "score": "2154"
                              },
                              {
                                    "id": "1649",
                                    "title": "通过指令创建有序数组",
                                    "score": "2208"
                              },
                              {
                                    "id": "1626",
                                    "title": "无矛盾的最佳球队"
                              },
                              {
                                    "id": "1409",
                                    "title": "查询带键的排列"
                              },
                              {
                                    "id": "2250",
                                    "title": "统计包含每个点的矩形数目"
                              },
                              {
                                    "id": "2179",
                                    "title": "统计数组中好三元组数目",
                                    "score": "2272"
                              },
                              {
                                    "id": "1395",
                                    "title": "统计作战单位数"
                              },
                              {
                                    "id": "2659",
                                    "title": "将数组清空",
                                    "score": "2282"
                              },
                              {
                                    "id": "2653",
                                    "title": "滑动子数组的美丽值",
                                    "desc": "树状数组二分"
                              },
                              {
                                    "id": "3515",
                                    "title": "带权树中的最短路径",
                                    "score": "2312"
                              },
                              {
                                    "id": "LCP 05",
                                    "title": "发",
                                    "desc": "LeetCoin 同 3515 题"
                              },
                              {
                                    "id": "1505",
                                    "title": "最多",
                                    "desc": "K 次交换相邻数位后得到的最小整数 2337"
                              },
                              {
                                    "id": "2926",
                                    "title": "平衡子序列的最大和",
                                    "score": "2448"
                              },
                              {
                                    "id": "2736",
                                    "title": "最大和查询",
                                    "score": "2533"
                              },
                              {
                                    "id": "3671",
                                    "title": "子序列美丽值求和",
                                    "score": "2647",
                                    "desc": "时间戳 懒初始化"
                              },
                              {
                                    "id": "3382",
                                    "title": "用点构造面积最大的矩形",
                                    "desc": "II 2723 静态二维数点"
                              },
                              {
                                    "id": "3590",
                                    "title": "第",
                                    "desc": "K 小的路径异或和 权值树状数组第 k 小"
                              },
                              {
                                    "id": "3245",
                                    "title": "交替组",
                                    "desc": "III 3112 环形数组"
                              },
                              {
                                    "id": "3027",
                                    "title": "人员站位的方案数",
                                    "desc": "II CDQ 分治"
                              },
                              {
                                    "id": "1756",
                                    "title": "设计最近使用（MRU）队列",
                                    "vip": true
                              },
                              {
                                    "id": "60",
                                    "title": "排列序列",
                                    "desc": "康托展开，可以做到 O(nlogn)"
                              },
                              {
                                    "id": "3109",
                                    "title": "查找排列的下标60",
                                    "desc": "题的数据加强版",
                                    "vip": true
                              },
                              {
                                    "id": "2519",
                                    "title": "统计",
                                    "desc": "K-Big 索引的数量（会员题）"
                              },
                              {
                                    "id": "2613",
                                    "title": "美数对曼哈顿最近点对",
                                    "vip": true
                              },
                              {
                                    "id": "2921",
                                    "title": "价格递增的最大利润三元组",
                                    "desc": "II（会员题）"
                              },
                              {
                                    "id": "308",
                                    "title": "二维区域和检索",
                                    "desc": "- 可变（会员题）"
                              }
                        ],
                        "desc": "讲解：带你发明树状数组！附数学证明\n模板：\nPython3\nJava\nC++\nGo\n# 模板来源 https://leetcode.cn/circle/discuss/mOr1u6/\nclass FenwickTree:\ndef __init__(self, n: int):\nself.tree = [0] * (n + 1)  # 使用下标 1 到 n\n# a[i] 增加 val\n# 1 <= i <= n\n# 时间复杂度 O(log n)\ndef update(self, i: int, val: int) -> None:\nt = self.tree\nwhile i < len(t):\nt[i] += val\ni += i & -i\n# 计算前缀和 a[1] + ... + a[i]\n# 1 <= i <= n\n# 时间复杂度 O(log n)\ndef pre(self, i: int) -> int:\nt = self.tree\nres = 0\nwhile i > 0:\nres += t[i]\ni &= i - 1\nreturn res\n# 计算区间和 a[l] + ... + a[r]\n# 1 <= l <= r <= n\n# 时间复杂度 O(log n)\ndef query(self, l: int, r: int) -> int:\nif r < l:\nreturn 0\nreturn self.pre(r) - self.pre(l - 1)"
                  },
                  {
                        "title": "§8.2 逆序对",
                        "problems": [
                              {
                                    "id": "LCR 170",
                                    "title": "交易逆序对的总数"
                              },
                              {
                                    "id": "315",
                                    "title": "计算右侧小于当前元素的个数"
                              },
                              {
                                    "id": "493",
                                    "title": "翻转对"
                              },
                              {
                                    "id": "327",
                                    "title": "区间和的个数"
                              },
                              {
                                    "id": "2426",
                                    "title": "满足不等式的数对数目",
                                    "score": "2030"
                              },
                              {
                                    "id": "1850",
                                    "title": "邻位交换的最小次数"
                              },
                              {
                                    "id": "2193",
                                    "title": "得到回文串的最少操作次数",
                                    "desc": "做到 O(nlogn)"
                              },
                              {
                                    "id": "1885",
                                    "title": "统计数对",
                                    "vip": true
                              }
                        ],
                        "desc": "除了可以用树状数组解决，部分题目也可以在归并排序的同时计算。"
                  },
                  {
                        "title": "§8.3 线段树（无区间更新）",
                        "problems": [
                              {
                                    "id": "3479",
                                    "title": "水果成篮",
                                    "desc": "III 2178 线段树二分"
                              },
                              {
                                    "id": "2940",
                                    "title": "找到",
                                    "desc": "Alice 和 Bob 可以相遇的建筑 2327 线段树二分"
                              },
                              {
                                    "id": "2286",
                                    "title": "以组为单位订音乐会的门票",
                                    "score": "2470",
                                    "desc": "线段树二分"
                              },
                              {
                                    "id": "3161",
                                    "title": "物块放置查询",
                                    "score": "2513"
                              },
                              {
                                    "id": "2213",
                                    "title": "由单个字符重复的最长子字符串",
                                    "score": "2629",
                                    "desc": "分治"
                              },
                              {
                                    "id": "3525",
                                    "title": "求出数组的",
                                    "desc": "X 值 II 2645 分治"
                              },
                              {
                                    "id": "3165",
                                    "title": "不包含相邻元素的子序列的最大和",
                                    "score": "2697",
                                    "desc": "分治"
                              },
                              {
                                    "id": "3410",
                                    "title": "删除所有值为某个元素后的最大子数组和",
                                    "score": "2844",
                                    "desc": "做法不止一种"
                              },
                              {
                                    "id": "3501",
                                    "title": "操作后最大活跃区段数",
                                    "desc": "II 2941 也可以用 ST 表做"
                              },
                              {
                                    "id": "LCP 81",
                                    "title": "与非的谜题"
                              },
                              {
                                    "id": "1157",
                                    "title": "子数组中占绝大多数的元素",
                                    "score": "2205"
                              },
                              {
                                    "id": "2407",
                                    "title": "最长递增子序列",
                                    "desc": "II 2280"
                              }
                        ],
                        "desc": "线段树本质是二叉树，在学习之前，建议先做做  104. 二叉树的最大深度 和  111. 二叉树的最小深度（自底向上写法），当作热身。\n线段树：为什么要这样设计？ 理解线段树发明的动机。\n把任意区间用 O(logn) 个区间表示，线段树的每个节点记录对应区间的信息。\n询问：把询问区间拆分成 O(logn) 个区间，对应着线段树的 O(logn) 个节点，把这 O(logn) 个节点的信息合并，即为答案。\n单点更新：有 O(logn) 个区间包含被修改的位置，需要更新 O(logn) 个节点的信息。\n基础模板代码如下。为方便入门理解，我没有做复杂封装。通用模板代码可以参考 AtCoder Library 的 segtree.hpp。\nPython3\nJava\nC++\nGo\n# 模板来源 https://leetcode.cn/circle/discuss/mOr1u6/\n# 线段树有两个下标，一个是线段树节点的下标，另一个是线段树维护的区间的下标\n# 节点的下标：从 1 开始，如果你想改成从 0 开始，需要把左右儿子下标分别改成 node*2+1 和 node*2+2\n# 区间的下标：从 0 开始\nclass SegmentTree:\ndef __init__(self, arr, default=0):\n# 线段树维护一个长为 n 的数组（下标从 0 到 n-1）\n# arr 可以是 list 或者 int\n# 如果 arr 是 int，视作数组大小，默认值为 default\nif isinstance(arr, int):\narr = [default] * arr\nn = len(arr)\nself._n = n\nself._tree = [0] * (2 << (n - 1).bit_length())\nself._build(arr, 1, 0, n - 1)\n# 合并两个 val\ndef _merge_val(self, a: int, b: int) -> int:\nreturn max(a, b)  # **根据题目修改**\n# 合并左右儿子的 val 到当前节点的 val\ndef _maintain(self, node: int) -> None:\nself._tree[node] = self._merge_val(self._tree[node * 2], self._tree[node * 2 + 1])\n# 用 a 初始化线段树\n# 时间复杂度 O(n)\ndef _build(self, a: List[int], node: int, l: int, r: int) -> None:\nif l == r:  # 叶子\nself._tree[node] = a[l]  # 初始化叶节点的值\nreturn\nm = (l + r) // 2\nself._build(a, node * 2, l, m)  # 初始化左子树\nself._build(a, node * 2 + 1, m + 1, r)  # 初始化右子树\nself._maintain(node)\ndef _update(self, node: int, l: int, r: int, i: int, val: int) -> None:\nif l == r:  # 叶子（到达目标）\n# 如果想直接替换的话，可以写 self._tree[node] = val\nself._tree[node] = self._merge_val(self._tree[node], val)\nreturn\nm = (l + r) // 2\nif i <= m:  # i 在左子树\nself._update(node * 2, l, m, i, val)\nelse:  # i 在右子树\nself._update(node * 2 + 1, m + 1, r, i, val)\nself._maintain(node)\ndef _query(self, node: int, l: int, r: int, ql: int, qr: int) -> int:\nif ql <= l and r <= qr:  # 当前子树完全在 [ql, qr] 内\nreturn self._tree[node]\nm = (l + r) // 2\nif qr <= m:  # [ql, qr] 在左子树\nreturn self._query(node * 2, l, m, ql, qr)\nif ql > m:  # [ql, qr] 在右子树\nreturn self._query(node * 2 + 1, m + 1, r, ql, qr)\nl_res = self._query(node * 2, l, m, ql, qr)\nr_res = self._query(node * 2 + 1, m + 1, r, ql, qr)\nreturn self._merge_val(l_res, r_res)\n# 更新 a[i] 为 _merge_val(a[i], val)\n# 时间复杂度 O(log n)\ndef update(self, i: int, val: int) -> None:\nself._update(1, 0, self._n - 1, i, val)\n# 返回用 _merge_val 合并所有 a[i] 的计算结果，其中 i 在闭区间 [ql, qr] 中\n# 时间复杂度 O(log n)\ndef query(self, ql: int, qr: int) -> int:\nreturn self._query(1, 0, self._n - 1, ql, qr)\n# 获取 a[i] 的值\n# 时间复杂度 O(log n)\ndef get(self, i: int) -> int:\nreturn self._query(1, 0, self._n - 1, i, i)\n思维扩展："
                  },
                  {
                        "title": "§8.4 Lazy 线段树（有区间更新）",
                        "problems": [
                              {
                                    "id": "2569",
                                    "title": "更新数组后处理求和查询",
                                    "score": "2398"
                              },
                              {
                                    "id": "1622",
                                    "title": "奇妙序列",
                                    "score": "2476",
                                    "desc": "做法不止一种"
                              },
                              {
                                    "id": "2502",
                                    "title": "设计内存分配器"
                              },
                              {
                                    "id": "2589",
                                    "title": "完成所有任务的最少时间",
                                    "desc": "非暴力做法"
                              },
                              {
                                    "id": "2547",
                                    "title": "拆分数组的最小代价",
                                    "desc": "非暴力做法"
                              },
                              {
                                    "id": "850",
                                    "title": "矩形面积",
                                    "desc": "II 矩形面积并 扫描线 离散化"
                              },
                              {
                                    "id": "3454",
                                    "title": "分割正方形",
                                    "desc": "II 2671 同 850 题"
                              },
                              {
                                    "id": "3569",
                                    "title": "分割数组后不同质数的最大数目",
                                    "score": "2697"
                              },
                              {
                                    "id": "3721",
                                    "title": "最长平衡子数组",
                                    "desc": "II 2724 HH 项链 trick"
                              },
                              {
                                    "id": "2916",
                                    "title": "子数组不同元素数目的平方和",
                                    "desc": "II 2816"
                              },
                              {
                                    "id": "LCP 52",
                                    "title": "二叉搜索树染色",
                                    "desc": "也可以用珂朵莉树或者并查集"
                              }
                        ],
                        "desc": "把任意区间用 O(logn) 个区间表示，线段树的每个节点记录对应区间的信息。\n询问：把询问区间拆分成 O(logn) 个区间，对应着线段树的 O(logn) 个节点，把这 O(logn) 个节点的信息合并，即为答案。\n区间更新：仍然是拆分成 O(logn) 个区间，对应着线段树的 O(logn) 个节点。但对于其中的非叶节点，不把更新的内容往下传递给子节点，而是记录「发生了更新，内容为 xxx」，把更新的内容记录下来。直到后续的询问或更新操作，需要访问或修改更下面的子节点信息时，才把更新的内容往下传。\n基础模板代码如下。为方便入门理解，我没有做复杂封装。通用模板代码可以参考 AtCoder Library 的 lazysegtree.hpp。\nPython3\nJava\nC++\nGo\n# 模板来源 https://leetcode.cn/circle/discuss/mOr1u6/\nclass Node:\n__slots__ = 'val', 'todo'\nclass LazySegmentTree:\n# 懒标记初始值\n_TODO_INIT = 0  # **根据题目修改**\ndef __init__(self, arr, default=0):\n# 线段树维护一个长为 n 的数组（下标从 0 到 n-1）\n# arr 可以是 list 或者 int\n# 如果 arr 是 int，视作数组大小，默认值为 default\nif isinstance(arr, int):\narr = [default] * arr\nn = len(arr)\nself._n = n\nself._tree = [Node() for _ in range(2 << (n - 1).bit_length())]\nself._build(arr, 1, 0, n - 1)\n# 合并两个 val\ndef _merge_val(self, a: int, b: int) -> int:\nreturn a + b  # **根据题目修改**\n# 合并两个懒标记\ndef _merge_todo(self, a: int, b: int) -> int:\nreturn a + b  # **根据题目修改**\n# 把懒标记作用到 node 子树（本例为区间加）\ndef _apply(self, node: int, l: int, r: int, todo: int) -> None:\ncur = self._tree[node]\n# 计算 tree[node] 区间的整体变化\ncur.val += todo * (r - l + 1)  # **根据题目修改**\ncur.todo = self._merge_todo(todo, cur.todo)\n# 把当前节点的懒标记下传给左右儿子\ndef _spread(self, node: int, l: int, r: int) -> None:\ntodo = self._tree[node].todo\nif todo == self._TODO_INIT:  # 没有需要下传的信息\nreturn\nm = (l + r) // 2\nself._apply(node * 2, l, m, todo)\nself._apply(node * 2 + 1, m + 1, r, todo)\nself._tree[node].todo = self._TODO_INIT  # 下传完毕\n# 合并左右儿子的 val 到当前节点的 val\ndef _maintain(self, node: int) -> None:\nself._tree[node].val = self._merge_val(self._tree[node * 2].val, self._tree[node * 2 + 1].val)\n# 用 a 初始化线段树\n# 时间复杂度 O(n)\ndef _build(self, a: List[int], node: int, l: int, r: int) -> None:\nself._tree[node].todo = self._TODO_INIT\nif l == r:  # 叶子\nself._tree[node].val = a[l]  # 初始化叶节点的值\nreturn\nm = (l + r) // 2\nself._build(a, node * 2, l, m)  # 初始化左子树\nself._build(a, node * 2 + 1, m + 1, r)  # 初始化右子树\nself._maintain(node)\ndef _update(self, node: int, l: int, r: int, ql: int, qr: int, f: int) -> None:\nif ql <= l and r <= qr:  # 当前子树完全在 [ql, qr] 内\nself._apply(node, l, r, f)\nreturn\nself._spread(node, l, r)\nm = (l + r) // 2\nif ql <= m:  # 更新左子树\nself._update(node * 2, l, m, ql, qr, f)\nif qr > m:  # 更新右子树\nself._update(node * 2 + 1, m + 1, r, ql, qr, f)\nself._maintain(node)\ndef _query(self, node: int, l: int, r: int, ql: int, qr: int) -> int:\nif ql <= l and r <= qr:  # 当前子树完全在 [ql, qr] 内\nreturn self._tree[node].val\nself._spread(node, l, r)\nm = (l + r) // 2\nif qr <= m:  # [ql, qr] 在左子树\nreturn self._query(node * 2, l, m, ql, qr)\nif ql > m:  # [ql, qr] 在右子树\nreturn self._query(node * 2 + 1, m + 1, r, ql, qr)\nl_res = self._query(node * 2, l, m, ql, qr)\nr_res = self._query(node * 2 + 1, m + 1, r, ql, qr)\nreturn self._merge_val(l_res, r_res)\n# 用 f 更新 [ql, qr] 中的每个 a[i]\n# 0 <= ql <= qr <= n-1\n# 时间复杂度 O(log n)\ndef update(self, ql: int, qr: int, f: int) -> None:\nself._update(1, 0, self._n - 1, ql, qr, f)\n# 返回用 _merge_val 合并所有 a[i] 的计算结果，其中 i 在闭区间 [ql, qr] 中\n# 0 <= ql <= qr <= n-1\n# 时间复杂度 O(log n)\ndef query(self, ql: int, qr: int) -> int:\nreturn self._query(1, 0, self._n - 1, ql, qr)"
                  },
                  {
                        "title": "§8.5 动态开点线段树",
                        "problems": [
                              {
                                    "id": "699",
                                    "title": "掉落的方块"
                              },
                              {
                                    "id": "715",
                                    "title": "Range",
                                    "desc": "模块"
                              },
                              {
                                    "id": "729",
                                    "title": "我的日程安排表",
                                    "desc": "I"
                              },
                              {
                                    "id": "731",
                                    "title": "我的日程安排表",
                                    "desc": "II"
                              },
                              {
                                    "id": "732",
                                    "title": "我的日程安排表",
                                    "desc": "III"
                              },
                              {
                                    "id": "2276",
                                    "title": "统计区间中的整数数目",
                                    "score": "2222"
                              },
                              {
                                    "id": "2770",
                                    "title": "达到末尾下标所需的最大跳跃次数",
                                    "desc": "见我题解下的 评论"
                              },
                              {
                                    "id": "3590",
                                    "title": "第",
                                    "desc": "K 小的路径异或和 2646 线段树合并"
                              }
                        ],
                        "desc": "部分题目也可以用珂朵莉树解决。"
                  },
                  {
                        "title": "§8.6 ST 表（Sparse Table）",
                        "problems": [
                              {
                                    "id": "3691",
                                    "title": "最大子数组总值",
                                    "desc": "II 2469"
                              },
                              {
                                    "id": "3501",
                                    "title": "操作后最大活跃区段数",
                                    "desc": "II 2941"
                              }
                        ],
                        "desc": "ST 表 支持区间最值查询（Range Minimum/Maximum Query，RMQ），但不支持修改。\n优点是代码短，且查询的时间复杂度是 O(1)。所以作为补充内容，附在此处。\nPython3\nJava\nC++\nGo\nclass SparseTable:\n# 时间复杂度 O(n * log n)\ndef __init__(self, nums: List[int], op: Callable[[int, int], int]):\nn = len(nums)\nw = n.bit_length()\nst = [[0] * n for _ in range(w)]\nst[0] = nums[:]\nfor i in range(1, w):\nfor j in range(n - (1 << i) + 1):\nst[i][j] = op(st[i - 1][j], st[i - 1][j + (1 << (i - 1))])\nself.st = st\nself.op = op\n# [l, r) 左闭右开，下标从 0 开始\n# 返回 op(nums[l:r])\n# 时间复杂度 O(1)\ndef query(self, l: int, r: int) -> int:\nk = (r - l).bit_length() - 1\nreturn self.op(self.st[k][l], self.st[k][r - (1 << k)])\n# 使用方法举例\nnums = [3, 1, 4, 1, 5, 9, 2, 6]\nst = SparseTable(nums, max)\nprint(st.query(0, 5))  # max(nums[0:5]) = 5\nprint(st.query(1, 1))  # 错误：必须保证 l < r"
                  }
            ]
      },
      {
            "title": "九、伸展树（Splay 树）",
            "children": [],
            "problems": [
                  {
                        "id": "2296",
                        "title": "设计一个文本编辑器"
                  },
                  {
                        "id": "3526",
                        "title": "范围异或查询与子数组反转",
                        "vip": true
                  }
            ]
      },
      {
            "title": "十、根号算法",
            "children": [
                  {
                        "title": "§8.1 根号分解（Sqrt Decomposition）",
                        "problems": [
                              {
                                    "id": "3655",
                                    "title": "区间乘法查询后的异或",
                                    "desc": "II 2454"
                              },
                              {
                                    "id": "LCP 16",
                                    "title": "游乐园的游览计划"
                              },
                              {
                                    "id": "1714",
                                    "title": "数组中特殊等间距元素的和",
                                    "vip": true
                              },
                              {
                                    "id": "3400",
                                    "title": "右移后的最大匹配索引数非暴力做法",
                                    "vip": true
                              }
                        ]
                  },
                  {
                        "title": "§8.2 莫队算法",
                        "problems": [
                              {
                                    "id": "3636",
                                    "title": "查询超过阈值频率最高元素",
                                    "score": "2451",
                                    "desc": "回滚莫队"
                              },
                              {
                                    "id": "3590",
                                    "title": "第",
                                    "desc": "K 小的路径异或和 2646 做法不止一种 分块"
                              }
                        ],
                        "desc": "属于离线算法的一种。"
                  },
                  {
                        "title": "§8.3 其他",
                        "problems": [
                              {
                                    "id": "3234",
                                    "title": "统计",
                                    "desc": "1 显著的字符串的数量 2557"
                              }
                        ]
                  }
            ]
      },
      {
            "title": "专题：离线算法",
            "children": [],
            "problems": [
                  {
                        "id": "2343",
                        "title": "裁剪数字后查询第",
                        "desc": "K 小的数字 1652"
                  },
                  {
                        "id": "3607",
                        "title": "电网维护",
                        "score": "1700"
                  },
                  {
                        "id": "2070",
                        "title": "每一个查询的最大美丽值",
                        "score": "1724"
                  },
                  {
                        "id": "1847",
                        "title": "最近的房间",
                        "score": "2082"
                  },
                  {
                        "id": "2503",
                        "title": "矩阵查询可获得的最大分数",
                        "score": "2196"
                  },
                  {
                        "id": "1851",
                        "title": "包含每个查询的最小区间",
                        "score": "2286"
                  },
                  {
                        "id": "1697",
                        "title": "检查边长度限制的路径是否存在",
                        "score": "2300"
                  },
                  {
                        "id": "2940",
                        "title": "找到",
                        "desc": "Alice 和 Bob 可以相遇的建筑 2327"
                  },
                  {
                        "id": "2747",
                        "title": "统计没有收到请求的服务器数目",
                        "score": "2405"
                  },
                  {
                        "id": "1938",
                        "title": "查询最大基因差",
                        "score": "2503"
                  },
                  {
                        "id": "2736",
                        "title": "最大和查询",
                        "score": "2533"
                  },
                  {
                        "id": "3590",
                        "title": "第",
                        "desc": "K 小的路径异或和 2646"
                  },
                  {
                        "id": "3382",
                        "title": "用点构造面积最大的矩形",
                        "desc": "II 2723 静态二维数点"
                  }
            ]
      },
      {
            "title": "专题：比较复杂的题目",
            "children": [
                  {
                        "title": "Part A",
                        "problems": [
                              {
                                    "id": "3197",
                                    "title": "包含所有",
                                    "desc": "1 的最小矩形面积 II 2541"
                              },
                              {
                                    "id": "2532",
                                    "title": "过桥的时间",
                                    "score": "2589"
                              },
                              {
                                    "id": "2056",
                                    "title": "棋盘上有效移动组合的数目",
                                    "score": "2611"
                              },
                              {
                                    "id": "913",
                                    "title": "猫和老鼠",
                                    "desc": "实际约 2800"
                              },
                              {
                                    "id": "1728",
                                    "title": "猫和老鼠",
                                    "desc": "II 2849"
                              },
                              {
                                    "id": "1900",
                                    "title": "最佳运动员的比拼回合",
                                    "desc": "做到 O(logn) 或者 O(1)"
                              },
                              {
                                    "id": "LCP 48",
                                    "title": "无限棋局",
                                    "desc": "分类讨论"
                              },
                              {
                                    "id": "LCP 21",
                                    "title": "追逐游戏",
                                    "desc": "分类讨论"
                              },
                              {
                                    "id": "LCP 58",
                                    "title": "积木拼接"
                              },
                              {
                                    "id": "LCP 13",
                                    "title": "寻宝"
                              },
                              {
                                    "id": "LCP 69",
                                    "title": "Hello",
                                    "desc": "LeetCode!"
                              },
                              {
                                    "id": "LCP 76",
                                    "title": "魔法棋盘"
                              },
                              {
                                    "id": "LCP 82",
                                    "title": "万灵之树"
                              }
                        ]
                  },
                  {
                        "title": "Part B",
                        "problems": [
                              {
                                    "id": "2468",
                                    "title": "根据限制分割消息",
                                    "score": "2382"
                              },
                              {
                                    "id": "68",
                                    "title": "文本左右对齐"
                              },
                              {
                                    "id": "13",
                                    "title": "罗马数字转整数",
                                    "desc": "有简单做法"
                              },
                              {
                                    "id": "12",
                                    "title": "整数转罗马数字",
                                    "desc": "有简单做法"
                              },
                              {
                                    "id": "273",
                                    "title": "整数转换英文表示"
                              },
                              {
                                    "id": "420",
                                    "title": "强密码检验器"
                              },
                              {
                                    "id": "8",
                                    "title": "字符串转换整数",
                                    "desc": "(atoi) 为 65 题热身"
                              },
                              {
                                    "id": "65",
                                    "title": "有效数字"
                              },
                              {
                                    "id": "146",
                                    "title": "LRU",
                                    "desc": "缓存"
                              },
                              {
                                    "id": "460",
                                    "title": "LFU",
                                    "desc": "缓存"
                              }
                        ],
                        "desc": "另见本题单的「§3.5 表达式解析」。"
                  }
            ]
      }
]
    }
  },
  'math': {
    title: '数学算法',
    prerequisites: [],
    problems: []
  },
  'greedy-thinking': {
    title: '贪心与思维',
    prerequisites: [],
    problems: []
  },
  'linked-list-tree-backtracking': {
    title: '链表、二叉树与回溯',
    prerequisites: [],
    problems: []
  },
  'strings': {
    title: '字符串',
    prerequisites: [],
    problems: []
  }
}

const nodes = [
  { id: 'sliding-window-two-pointers', x: 400, y: 50 },
  { id: 'binary-search', x: 150, y: 200 },
  { id: 'linked-list-tree-backtracking', x: 650, y: 200 },
  { id: 'monotonic-stack', x: 150, y: 350 },
  { id: 'data-structures', x: 400, y: 350 },
  { id: 'strings', x: 650, y: 350 },
  { id: 'grid-graph', x: 150, y: 500 },
  { id: 'graph-algorithms', x: 400, y: 500 },
  { id: 'greedy-thinking', x: 650, y: 500 },
  { id: 'math', x: 150, y: 650 },
  { id: 'bit-manipulation', x: 400, y: 650 },
  { id: 'dynamic-programming', x: 400, y: 800 }
]

function countProblemsInSection(section: any): number {
  let count = 0
  if (section.problems) count += section.problems.length
  if (section.children) {
    section.children.forEach((child: any) => (count += countProblemsInSection(child)))
  }
  return count
}

function countProblems(topic: Topic): number {
  if (topic.problems) return topic.problems.length
  if (topic.rootSection) return countProblemsInSection(topic.rootSection)
  return 0
}

const edges = [
  ['sliding-window-two-pointers', 'binary-search'],
  ['sliding-window-two-pointers', 'linked-list-tree-backtracking'],
  ['binary-search', 'monotonic-stack'],
  ['linked-list-tree-backtracking', 'data-structures'],
  ['linked-list-tree-backtracking', 'strings'],
  ['monotonic-stack', 'grid-graph'],
  ['data-structures', 'graph-algorithms'],
  ['strings', 'greedy-thinking'],
  ['grid-graph', 'graph-algorithms'],
  ['graph-algorithms', 'math'],
  ['graph-algorithms', 'bit-manipulation'],
  ['math', 'dynamic-programming'],
  ['bit-manipulation', 'dynamic-programming'],
  ['greedy-thinking', 'dynamic-programming']
]

const headings = [{ depth: 2, slug: 'roadmap', text: 'Algorithm Roadmap' }]
---

<PageLayout title='Algorithm Roadmap' {headings}>
  <p class='mb-6 text-muted-foreground'>
    点击节点查看题目列表，参考
    <a href='https://leetcode.cn/discuss/post/RvFUtj/' target='_blank' class='text-primary hover:underline'>灵茶山艾府 - 如何科学刷题？</a>。
  </p>

  <div class='roadmap-container'>
    <!-- Mini-map and controls -->
    <div class='roadmap-controls'>
      <div class='mini-map'>
        <svg class='mini-map-svg' viewBox='0 0 1000 1200' xmlns='http://www.w3.org/2000/svg'>
          {edges.map(([from, to]) => {
            const a = nodes.find(n => n.id === from)
            const b = nodes.find(n => n.id === to)
            if (!a || !b) return null
            const rectW = 180, rectH = 64
            const x1 = a.x + rectW / 2, y1 = a.y + rectH / 2
            const x2 = b.x + rectW / 2, y2 = b.y
            return <line x1={x1} y1={y1} x2={x2} y2={y2} stroke='#475569' stroke-width='6' />
          })}
          {nodes.map(n => (
            <rect x={n.x} y={n.y} width='180' height='64' rx='8' fill='#334155' stroke='#60a5fa' stroke-width='4' />
          ))}
          <rect id='mini-viewport' class='mini-viewport' x='0' y='0' width='1000' height='900' fill='rgba(96, 165, 250, 0.15)' stroke='#60a5fa' stroke-width='8' />
        </svg>
      </div>
      <button id='reset-btn' class='reset-btn' title='Reset View'>
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
        <span>Reset</span>
      </button>
      <div class='zoom-info' id='zoom-info'>100%</div>
      <div class='zoom-btns'>
        <button id='zoom-in' class='zoom-btn' title='Zoom In'>+</button>
        <button id='zoom-out' class='zoom-btn' title='Zoom Out'>-</button>
      </div>
    </div>

    <div class='roadmap-box'>
      <svg class='roadmap-svg' viewBox='0 0 1000 1200' xmlns='http://www.w3.org/2000/svg'>
        <g id='canvas' transform='translate(0,0) scale(1)'>
        {edges.map(([from, to]) => {
          const a = nodes.find(n => n.id === from)
          const b = nodes.find(n => n.id === to)
          if (!a || !b) return null
          const rectW = 180, rectH = 64
          const x1 = a.x + rectW / 2, y1 = a.y + rectH / 2
          const x2 = b.x + rectW / 2, y2 = b.y
          const cy = (y1 + y2) / 2
          return <path d={`M${x1} ${y1} C${x1} ${cy}, ${x2} ${cy}, ${x2} ${y2}`} class='edge-line' />
        })}
        {nodes.map(n => (
          <g class='node-box' data-id={n.id} transform={`translate(${n.x},${n.y})`}>
            <rect width='180' height='64' rx='12' />
            <rect class='node-progress' x='0' y='60' width='0' height='4' rx='2' />
            <text x='90' y='38'>{topics[n.id].title}</text>
          </g>
        ))}
      </g>
    </svg>
  </div>
</div>

  <RoadmapDrawer topics={topics} />

  <!-- Activity Graph -->
  <div class='mt-12 mb-8'>
    <h2 class='text-2xl font-bold mb-4'>Activity</h2>
    <div class='border rounded-xl p-4 bg-card'>
      <ActivityGraph />
    </div>
  </div>

  <!-- List View Section -->
  <div class='mt-12'>
    <h2 class='text-2xl font-bold mb-6'>All Topics</h2>
    <div class='grid gap-6 sm:grid-cols-2 lg:grid-cols-3'>
      {Object.entries(topics).map(([id, topic]) => (
        <div class='topic-card border rounded-xl p-4 bg-card hover:shadow-md transition-shadow' data-id={id}>
          <h3 class='text-lg font-semibold mb-2'>{topic.title}</h3>
          <div class='text-sm text-muted-foreground mb-3'>
            {countProblems(topic)} Problems
          </div>
          <div class='bar-track h-2 mb-3 bg-muted rounded-full overflow-hidden'><div class='bar-fill list-progress-bar h-full bg-primary transition-all duration-500' data-id={id} style='width: 0%'></div></div>
          <button class='text-primary text-sm font-medium hover:underline open-topic-btn' data-id={id}>
            View Problems →
          </button>
        </div>
      ))}
    </div>
  </div>
</PageLayout>

<script define:vars={{ topics }} is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    // Open Drawer Helper
    function open(id) {
      if (window.openRoadmapDrawer) {
        window.openRoadmapDrawer(id)
      }
    }

    document.querySelectorAll('.node-box').forEach(el => {
      el.addEventListener('click', (evt) => {
        evt.stopPropagation()
        open(el.dataset.id)
      })
    })

    document.querySelectorAll('.open-topic-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        open(btn.dataset.id)
      })
    })

    // Panning / Dragging the canvas
    const svg = document.querySelector('.roadmap-svg')
    const canvas = document.getElementById('canvas')
    const miniViewport = document.getElementById('mini-viewport')
    const resetBtn = document.getElementById('reset-btn')
    const zoomInfo = document.getElementById('zoom-info')
    const zoomInBtn = document.getElementById('zoom-in')
    const zoomOutBtn = document.getElementById('zoom-out')
    
    let isPanning = false
    let startX = 0, startY = 0
    let panX = 0, panY = 0
    let scale = 1
    const minScale = 0.3, maxScale = 2.5

    function updateTransform() {
      canvas.setAttribute('transform', `translate(${panX},${panY}) scale(${scale})`)
      zoomInfo.textContent = `${Math.round(scale * 100)}%`
      updateMiniMap()
    }

    function zoom(delta) {
      scale = Math.min(maxScale, Math.max(minScale, scale * delta))
      
      // Zoom towards center of viewport
      const rect = svg.getBoundingClientRect()
      const centerX = rect.width / 2
      const centerY = rect.height / 2
      
      // Adjust pan to keep center fixed
      panX = centerX - (centerX - panX) * (scale / oldScale)
      panY = centerY - (centerY - panY) * (scale / oldScale)
      
      updateTransform()
    }

    zoomInBtn.addEventListener('click', () => zoom(1.2))
    zoomOutBtn.addEventListener('click', () => zoom(0.8))

    function updateMiniMap() {
      if (!miniViewport) return
      // viewport in SVG coordinates
      const vw = 1000 / scale
      const vh = 1200 / scale
      const vx = -panX / scale
      const vy = -panY / scale
      miniViewport.setAttribute('x', vx)
      miniViewport.setAttribute('y', vy)
      miniViewport.setAttribute('width', vw)
      miniViewport.setAttribute('height', vh)
    }

    function resetView() {
      panX = 0
      panY = 0
      scale = 1
      updateTransform()
    }

    resetBtn.addEventListener('click', resetView)

    svg.style.cursor = 'grab'

    svg.addEventListener('mousedown', (e) => {
      if (e.button !== 0) return
      // prevent panning when clicking node (nodes stopPropagation above)
      isPanning = true
      startX = e.clientX
      startY = e.clientY
      svg.style.cursor = 'grabbing'
    })

    document.addEventListener('mousemove', (e) => {
      if (!isPanning) return
      const dx = e.clientX - startX
      const dy = e.clientY - startY
      canvas.setAttribute('transform', `translate(${panX + dx},${panY + dy}) scale(${scale})`)
      updateMiniMap()
    })

    document.addEventListener('mouseup', (e) => {
      if (!isPanning) return
      const dx = e.clientX - startX
      const dy = e.clientY - startY
      panX += dx
      panY += dy
      isPanning = false
      svg.style.cursor = 'grab'
      updateMiniMap()
    })

    // Zoom with Ctrl+Wheel
    svg.addEventListener('wheel', (e) => {
      if (!e.ctrlKey) return
      e.preventDefault()
      const rect = svg.getBoundingClientRect()
      const mouseX = e.clientX - rect.left
      const mouseY = e.clientY - rect.top
      
      // Convert mouse position to SVG coordinates
      const svgX = (mouseX / rect.width) * 1000
      const svgY = (mouseY / rect.height) * 1200
      
      const oldScale = scale
      const delta = e.deltaY > 0 ? 0.9 : 1.1
      scale = Math.min(maxScale, Math.max(minScale, scale * delta))
      
      // Adjust pan to zoom towards mouse position
      panX = panX - (svgX - panX / oldScale) * (scale - oldScale)
      panY = panY - (svgY - panY / oldScale) * (scale - oldScale)
      
      updateTransform()
    }, { passive: false })

    // Touch support
    // Touch support for panning and pinch-zoom
    let lastTouchDist = 0
    let lastTouchCenter = { x: 0, y: 0 }
    
    svg.addEventListener('touchstart', (e) => {
      if (e.touches.length === 1) {
        isPanning = true
        startX = e.touches[0].clientX
        startY = e.touches[0].clientY
      } else if (e.touches.length === 2) {
        isPanning = false
        const t1 = e.touches[0], t2 = e.touches[1]
        lastTouchDist = Math.hypot(t2.clientX - t1.clientX, t2.clientY - t1.clientY)
        lastTouchCenter = { x: (t1.clientX + t2.clientX) / 2, y: (t1.clientY + t2.clientY) / 2 }
      }
    }, { passive: true })

    document.addEventListener('touchmove', (e) => {
      if (e.touches.length === 1 && isPanning) {
        const dx = e.touches[0].clientX - startX
        const dy = e.touches[0].clientY - startY
        canvas.setAttribute('transform', `translate(${panX + dx},${panY + dy}) scale(${scale})`)
        updateMiniMap()
      } else if (e.touches.length === 2) {
        const t1 = e.touches[0], t2 = e.touches[1]
        const dist = Math.hypot(t2.clientX - t1.clientX, t2.clientY - t1.clientY)
        const center = { x: (t1.clientX + t2.clientX) / 2, y: (t1.clientY + t2.clientY) / 2 }
        
        // Pinch zoom
        if (lastTouchDist > 0) {
          const delta = dist / lastTouchDist
          const oldScale = scale
          scale = Math.min(maxScale, Math.max(minScale, scale * delta))
          
          // Pan while zooming
          const dx = center.x - lastTouchCenter.x
          const dy = center.y - lastTouchCenter.y
          panX += dx
          panY += dy
          
          updateTransform()
        }
        lastTouchDist = dist
        lastTouchCenter = center
      }
    }, { passive: true })

    document.addEventListener('touchend', (e) => {
      if (e.touches.length < 2) {
        lastTouchDist = 0
      }
      if (e.touches.length === 0 && isPanning) {
        // Finalize panning
        const matrix = canvas.getAttribute('transform') || 'translate(0,0) scale(1)'
        const m = matrix.match(/translate\(([-0-9.]+),([-0-9.]+)\)/)
        if (m) { panX = parseFloat(m[1]); panY = parseFloat(m[2]) }
        isPanning = false
      }
    })
  })
</script>
<style>
  /* Roadmap Container */
  .roadmap-container {
    position: relative;
  }

  .roadmap-controls {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    z-index: 10;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    align-items: flex-end;
  }

  .mini-map {
    width: 150px;
    height: 180px;
    background: hsl(var(--card));
    border: 1px solid hsl(var(--border));
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }

  .mini-map-svg {
    width: 100%;
    height: 100%;
    background: hsl(var(--muted));
  }

  .mini-viewport {
    pointer-events: none;
  }

  .reset-btn {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.5rem 0.75rem;
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.85rem;
    font-weight: 500;
    transition: opacity 0.2s;
  }
  .reset-btn:hover { opacity: 0.85; }

  .zoom-info {
    background: hsl(var(--muted));
    color: hsl(var(--muted-foreground));
    padding: 0.3rem 0.6rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
    border: 1px solid hsl(var(--border));
  }

  .zoom-btns {
    display: flex;
    gap: 0.25rem;
  }
  .zoom-btn {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: hsl(var(--card));
    border: 1px solid hsl(var(--border));
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    color: hsl(var(--foreground));
    transition: all 0.2s;
  }
  .zoom-btn:hover {
    background: hsl(var(--muted));
    border-color: hsl(var(--primary));
    color: hsl(var(--primary));
  }

  /* Roadmap Box */
  .roadmap-box {
    border-radius: 12px;
    background: linear-gradient(135deg, hsl(var(--muted)) 0%, hsl(var(--card)) 100%);
    border: 1px solid hsl(var(--border));
    overflow: hidden;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
  }

  .roadmap-svg {
    width: 100%;
    height: 600px;
    display: block;
    touch-action: none;
    user-select: none;
  }

  /* Edge Lines */
  .edge-line {
    stroke: hsl(var(--muted-foreground) / 0.4);
    stroke-width: 2.5;
    fill: none;
  }

  /* Node Boxes */
  .node-box rect {
    fill: hsl(var(--card));
    stroke: hsl(var(--primary));
    stroke-width: 2;
    transition: all 0.2s ease;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.15));
  }
  .node-box:hover rect {
    fill: hsl(var(--primary) / 0.15);
    stroke-width: 3;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.25));
  }
  .node-box {
    cursor: pointer;
  }
  .node-box text {
    fill: hsl(var(--foreground));
    font-size: 14px;
    font-weight: 600;
    text-anchor: middle;
    dominant-baseline: middle;
    pointer-events: none;
  }

    /* Responsive */
    @media (max-width: 640px) {
      .roadmap-controls {
        top: 0.25rem;
        right: 0.25rem;
      }
      .mini-map {
        width: 100px;
        height: 120px;
      }
      .reset-btn span { display: none; }
      .reset-btn { padding: 0.5rem; }
    }
  </style>

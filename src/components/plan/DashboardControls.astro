---
interface Props {
  tags: string[]
}

const { tags } = Astro.props
---

<div class="sticky top-4 z-30 mb-8 rounded-xl border bg-card/80 backdrop-blur-md shadow-sm transition-all p-4">
  <div class="flex flex-col md:flex-row gap-4 items-center justify-between">
    
    {/* Global Search */}
    <div class="relative w-full md:w-80 group">
      <div class="absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground group-focus-within:text-primary transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
      </div>
      <input 
        type="text" 
        id="search-input"
        placeholder="Search readings, plans..." 
        class="w-full pl-10 pr-4 py-2 rounded-full border bg-muted/50 focus:bg-background focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all"
      />
    </div>

    {/* Date Filter & Tags Control */}
    <div class="flex items-center gap-3 w-full md:w-auto overflow-x-auto pb-1 md:pb-0 scrollbar-hide">
      
      {/* Date Picker */}
      <div class="relative shrink-0">
        <input 
          type="date" 
          id="date-filter"
          class="pl-3 pr-2 py-1.5 rounded-lg border bg-muted/30 text-sm focus:border-primary outline-none"
        />
      </div>

      <div class="h-6 w-[1px] bg-border mx-1 shrink-0"></div>

      {/* Tag Chips */}
      <div class="flex gap-2" id="tag-filters">
        <button 
          data-tag="all"
          class="tag-filter active px-3 py-1.5 rounded-full text-xs font-medium border border-primary bg-primary/10 text-primary transition-all whitespace-nowrap"
        >
          All
        </button>
        {tags.map(tag => (
          <button 
            data-tag={tag}
            class="tag-filter px-3 py-1.5 rounded-full text-xs font-medium border border-transparent bg-muted/50 text-muted-foreground hover:bg-muted hover:text-foreground transition-all whitespace-nowrap"
          >
            {tag}
          </button>
        ))}
      </div>
    </div>
  </div>
</div>

<style>
  .tag-filter.active {
    background-color: hsl(var(--primary) / 0.1);
    color: hsl(var(--primary));
    border-color: hsl(var(--primary));
  }
</style>
